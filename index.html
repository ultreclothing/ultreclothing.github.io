<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Ultre</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: #0f0f0f;
        color: #f2f2f2;
        font-family: 'Quicksand', sans-serif;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow-x: hidden;
        overflow-y: auto;
        scroll-behavior: smooth;
        text-align: center;
      }

      .hidden-content {
        display: none;
      }

      .active-content {
        display: flex;
        flex-direction: column;
        flex-grow: 1;
      }

      .transition-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #0f0f0f;
        z-index: 9999;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out;
      }

      .transition-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      /* Desktop Navigation (Bottom Bar) */
      nav {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(15, 15, 15, 0.7);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
        padding: 10px 20px;
        z-index: 1000;
        box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
      }

      nav ul {
        list-style: none;
        display: flex;
        gap: 30px;
        position: relative;
      }

      nav ul li {
          position: relative;
          z-index: 1;
      }

      nav ul li a {
        color: #f2f2f2;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: 700;
        padding: 5px 10px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        display: flex;
        flex-direction: column;
        align-items: center;
        position: relative;
        overflow: hidden;
      }

      nav ul li a::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 0;
        height: 2px;
        background: linear-gradient(90deg, #3b82f6, #8b5cf6);
        transition: all 0.3s ease;
        transform: translateX(-50%);
      }

      nav ul li a:hover::before {
        width: 100%;
      }

      nav ul li a:hover {
        color: #f2f2f2;
        transform: translateY(-2px);
      }

      nav ul li a:hover i {
        transform: scale(1.1);
        transition: transform 0.3s ease;
      }

      nav ul li a.active-nav-link {
          color: #f2f2f2;
      }

      #nav-indicator {
          position: absolute;
          background-color: rgba(50, 50, 50, 0.7);
          transition: left 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      width 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      height 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      top 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                      border-radius 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
          z-index: 0;
          border-radius: 9999px;
          box-sizing: border-box;
      }

      /* Mobile Hamburger Icon */
      .hamburger-menu-icon {
          position: fixed;
          top: 20px;
          left: 20px;
          font-size: 2.5rem;
          color: #f2f2f2;
          cursor: pointer;
          z-index: 1100;
          transition: color 0.3s ease;
          display: none;
      }

      .hamburger-menu-icon:hover {
          color: #d0d0d0;
      }

      /* Mobile Navigation Overlay */
      #mobile-nav-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(15, 15, 15, 0.95);
          backdrop-filter: blur(10px);
          -webkit-backdrop-filter: blur(10px);
          z-index: 1500;
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          transform: translateX(-100%);
          transition: transform 0.4s ease-in-out;
      }

      #mobile-nav-overlay.open {
          transform: translateX(0);
      }

      #mobile-nav-overlay .close-btn {
          position: absolute;
          top: 20px;
          right: 20px;
          font-size: 3rem;
          color: #f2f2f2;
          cursor: pointer;
          transition: color 0.2s ease;
      }

      #mobile-nav-overlay .close-btn:hover {
          color: #d0d0d0;
      }

      #mobile-nav-overlay ul {
          list-style: none;
          display: flex;
          flex-direction: column;
          gap: 25px;
          font-size: 1.8rem;
          font-weight: 700;
      }

      #mobile-nav-overlay ul li a {
          color: #f2f2f2;
          text-decoration: none;
          padding: 10px 20px;
          border-radius: 8px;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          position: relative;
          overflow: hidden;
      }

      #mobile-nav-overlay ul li a::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
          transition: left 0.5s ease;
      }

      #mobile-nav-overlay ul li a:hover::before {
          left: 100%;
      }

      #mobile-nav-overlay ul li a:hover {
          background-color: rgba(242, 242, 242, 0.1);
          transform: translateX(5px);
      }

      section {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 40px 20px;
        position: relative;
        width: 100%;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      section:hover {
        transform: translateY(-2px);
      }

      #intro-section {
          min-height: 100vh;
      }

      #main-website-content-wrapper > section {
          display: none;
          padding-top: 80px;
          padding-bottom: 80px;
          min-height: calc(100vh - 100px);
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
      }

      #main-website-content-wrapper > section.active-page {
          display: flex;
      }

      #intro-section {
        background: #0f0f0f;
      }
      #shop-page, #contact-main, #about-us-main, #item-detail-page, #sign-in-main, #sign-up-main, #onboarding-main, #support-main, #chat-interface, #settings-main {
        background: #1a1a1a;
      }
      #home-main, #cart-main {
        background: #0f0f0f;
      }

      /* Updated .logo for image integration */
      .logo {
        margin-bottom: 30px;
        opacity: 0;
        transform: scale(0.5);
        animation: fadeInScale 1.2s ease-out forwards, logoPulseGlow 2s infinite alternate 1.2s;
        display: inline-block;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .logo:hover {
        transform: scale(1.05);
        filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
      }

      .logo img {
          max-width: 150px; /* Set a max width for the logo image - increased from 120px */
          height: auto; /* Maintain aspect ratio */
          object-fit: contain; /* Ensure the entire logo is visible */
          filter: invert(100%); /* Invert colors if logo is black on transparent/white */
          /* If your logo is already white on transparent, remove the filter above */
      }

      @keyframes fadeInScale {
        0% {
          opacity: 0;
          transform: scale(0.5);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      /* New keyframes for logo specific glow */
      @keyframes logoPulseGlow {
        0% {
          transform: scale(1);
          filter: invert(100%) drop-shadow(0 0 0px rgba(255, 255, 255, 0.7)); /* Initial state, no glow - changed to white */
        }
        50% {
          transform: scale(1.05);
          filter: invert(100%) drop-shadow(0 0 15px rgba(255, 255, 255, 0.9)); /* Pulsing and glowing - changed to white */
        }
        100% {
          transform: scale(1);
          filter: invert(100%) drop-shadow(0 0 0px rgba(255, 255, 255, 0.7)); /* Back to initial - changed to white */
        }
      }

      .tagline, .info-content {
        font-size: 3.5rem;
        letter-spacing: 2px;
        line-height: 1.2;
        max-width: 90%;
        margin-bottom: 15px;
        font-weight: 700;
      }

      .info-content {
        font-size: 1.3rem;
        font-weight: 400;
        max-width: 700px;
        line-height: 1.6;
        color: #d0d0d0;
      }

      .animated-letter {
        opacity: 0;
        transform: translateY(20px);
        display: inline-block;
        animation: letterFadeIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        transition: all 0.3s ease;
      }

      .animated-letter:hover {
        transform: translateY(-5px) scale(1.1);
        color: #3b82f6;
        text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
      }

      .animated-letter.space {
          width: 0.25em;
      }

      @keyframes letterFadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .scroll-hint {
        font-size: 1.1rem;
        opacity: 0;
        margin-top: 20px;
        color: #a0a0a0;
        animation: fadeInBlock 0.8s ease-out forwards;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .scroll-hint:hover {
        color: #f2f2f2;
        transform: translateY(-3px);
        text-shadow: 0 0 15px rgba(242, 242, 242, 0.3);
      }

      @keyframes fadeInBlock {
        0% { opacity: 0; transform: translateY(20px); }
        100% { opacity: 1; transform: translateY(0); }
      }

      .info-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 25px;
        color: #f2f2f2;
        opacity: 0;
        animation: fadeInBlock 0.8s ease-out forwards;
      }

      .shop-button {
        background: linear-gradient(135deg, #f2f2f2 0%, #e0e0e0 100%);
        color: #0f0f0f;
        border: none;
        padding: 15px 30px;
        border-radius: 12px;
        font-family: 'Quicksand', sans-serif;
        font-size: 1.2rem;
        font-weight: 700;
        cursor: pointer;
        margin-top: 30px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        opacity: 0;
        animation: fadeInBlock 0.8s ease-out forwards;
        position: relative;
        overflow: hidden;
      }

      .shop-button::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.6s ease;
      }

      .shop-button:hover::before {
        left: 100%;
      }

      .shop-button:hover {
        background: linear-gradient(135deg, #e0e0e0 0%, #d0d0d0 100%);
        transform: translateY(-6px) scale(1.02);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }

      .shop-button:active {
        transform: translateY(-2px) scale(0.98);
      }

      footer {
        background: #0a0a0a;
        color: #888;
        text-align: center;
        padding: 25px 20px;
        font-size: 0.9rem;
        margin-top: auto;
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.7);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
      }

      .modal-overlay.show {
        opacity: 1;
        visibility: visible;
      }

      .modal-content {
        background-color: #1a1a1a;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
        max-width: 500px;
        width: 90%;
        color: #f2f2f2;
        position: relative;
        transform: translateY(-20px);
        opacity: 0;
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
      }

      .modal-overlay.show .modal-content {
        transform: translateY(0);
        opacity: 1;
      }

      .modal-close-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: none;
        border: none;
        font-size: 1.8rem;
        color: #f2f2f2;
        cursor: pointer;
        transition: color 0.2s ease;
      }

      .modal-close-btn:hover {
        color: #d0d0d0;
      }

      .modal-title {
        font-size: 2rem;
        font-weight: 700;
        margin-bottom: 20px;
        color: #f2f2f2;
      }

      .modal-total {
        font-size: 1.8rem;
        font-weight: 700;
        margin-top: 20px;
        margin-bottom: 30px;
        color: #f2f2f2;
      }

      .payment-methods label {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 15px;
        font-size: 1.1rem;
        cursor: pointer;
      }

      .payment-methods input[type="radio"] {
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid #f2f2f2;
        border-radius: 50%;
        display: grid;
        place-content: center;
        transition: all 0.2s ease;
      }

      .payment-methods input[type="radio"]::before {
        content: "";
        width: 10px;
        height: 10px;
        border-radius: 50%;
        transform: scale(0);
        transition: transform 0.2s ease;
        background-color: #f2f2f2;
      }

      .payment-methods input[type="radio"]:checked {
        background-color: #f2f2f2;
        border-color: #f2f2f2;
      }

      .payment-methods input[type="radio"]:checked::before {
        transform: scale(1);
      }

      .place-order-btn {
        background-color: #f2f2f2;
        color: #0f0f0f;
        border: none;
        padding: 15px 30px;
        border-radius: 8px;
        font-family: 'Quicksand', sans-serif;
        font-size: 1.2rem;
        font-weight: 700;
        cursor: pointer;
        margin-top: 30px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        width: 100%;
      }

      .place-order-btn:hover {
        background-color: #d0d0d0;
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
      }

      #item-detail-page-content {
          display: flex;
          flex-direction: column;
          gap: 40px;
          width: 100%;
          max-width: 900px;
          margin: 0 auto;
          align-items: center;
          text-align: left;
      }

      @media (min-width: 768px) {
          #item-detail-page-content {
              flex-direction: row;
              text-align: left;
              align-items: flex-start;
          }
      }

      .item-detail-left {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 20px;
          padding: 20px;
          background-color: #2a2a2a;
          border-radius: 12px;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
          min-width: 300px;
      }

      .item-detail-right {
          flex: 2;
          padding: 20px;
          background-color: #2a2a2a;
          border-radius: 12px;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      }

      .item-detail-image {
          width: 100%;
          max-width: 300px;
          height: auto;
          border-radius: 8px;
          object-fit: cover;
          box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
          transform: translateX(-50px);
          opacity: 0;
          transition: transform 0.5s ease-out, opacity 0.5s ease-out;
      }

      #item-detail-page.active-page .item-detail-image {
          transform: translateX(0);
          opacity: 1;
      }

      .item-detail-name {
          font-size: 2.5rem;
          font-weight: 700;
          color: #f2f2f2;
          margin-bottom: 10px;
      }

      .item-detail-price {
          font-size: 1.8rem;
          font-weight: 600;
          color: #d0d0d0;
          margin-bottom: 20px;
      }

      .item-detail-description {
          font-size: 1.1rem;
          line-height: 1.6;
          color: #c0c0c0;
      }

      .back-to-shop-btn {
          background-color: #555;
          color: #f2f2f2;
          border: none;
          padding: 10px 20px;
          border-radius: 8px;
          font-family: 'Quicksand', sans-serif;
          font-size: 1rem;
          font-weight: 700;
          cursor: pointer;
          margin-top: 20px;
          transition: background-color 0.3s ease;
      }

      .back-to-shop-btn:hover {
          background-color: #777;
      }

      #message-box {
          position: fixed;
          top: 0;
          left: 50%;
          transform: translateX(-50%) translateY(-100%);
          background-color: #28a745;
          color: white;
          padding: 12px 25px;
          border-radius: 0 0 8px 8px;
          box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
          z-index: 3000;
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.5s ease-in-out, visibility 0.5s ease-in-out, transform 0.5s ease-in-out;
          font-weight: 600;
          display: flex;
          align-items: center;
          gap: 10px;
      }

      #message-box.show {
          opacity: 1;
          visibility: visible;
          transform: translateX(-50%) translateY(0);
          animation: subtleShake 0.4s ease-in-out 0.5s 1;
      }

      @keyframes subtleShake {
          0% { transform: translateX(-50%) translateY(0); }
          25% { transform: translateX(-50%) translateY(0) translateX(-3px); }
          50% { transform: translateX(-50%) translateY(0) translateX(3px); }
          75% { transform: translateX(-50%) translateY(0) translateX(-2px); }
          100% { transform: translateX(-50%) translateY(0); }
      }

      .profile-menu-container {
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 1100;
          cursor: pointer;
      }

      .profile-icon {
          font-size: 2.5rem;
          color: #f2f2f2;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          cursor: pointer;
      }

      .profile-icon:hover {
          color: #3b82f6;
          transform: scale(1.1) rotate(5deg);
          filter: drop-shadow(0 0 10px rgba(59, 130, 246, 0.5));
      }

      .profile-icon:hover {
          color: #d0d0d0;
      }

      .profile-dropdown {
          position: absolute;
          top: calc(100% + 10px);
          right: 0;
          background-color: rgba(26, 26, 26, 0.9);
          backdrop-filter: blur(10px);
          border-radius: 12px;
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
          min-width: 150px;
          display: flex;
          flex-direction: column;
          opacity: 0;
          visibility: hidden;
          transform: translateY(-10px) scale(0.95);
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .profile-menu-container:hover .profile-dropdown {
          opacity: 1;
          visibility: visible;
          transform: translateY(0) scale(1);
      }

      .dropdown-item {
          padding: 12px 15px;
          color: #f2f2f2;
          text-decoration: none;
          font-size: 1rem;
          font-weight: 500;
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          border-radius: 8px;
          position: relative;
          overflow: hidden;
      }

      .dropdown-item::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
          transition: left 0.5s ease;
      }

      .dropdown-item:hover::before {
          left: 100%;
      }

      .dropdown-item:hover {
          background-color: rgba(59, 130, 246, 0.1);
          color: #3b82f6;
          transform: translateX(5px);
      }

      .profile-dropdown .dropdown-item:first-child {
          border-top-left-radius: 8px;
          border-top-right-radius: 8px;
      }

      .profile-dropdown .dropdown-item:last-child {
          border-bottom-left-radius: 8px;
          border-bottom-right-radius: 8px;
      }

      /* Enhanced Authentication Forms */
      .auth-form-container {
          background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
          padding: 40px;
          border-radius: 20px;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
          max-width: 500px;
          width: 90%;
          border: 1px solid rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          position: relative;
          overflow: hidden;
      }

      .auth-form-container::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
          transition: left 0.6s ease;
      }

      .auth-form-container:hover::before {
          left: 100%;
      }

      .auth-header {
          animation: slideInDown 0.8s ease-out;
      }

      .auth-icon {
          animation: bounceIn 1s ease-out 0.2s both;
      }

      .form-group {
          position: relative;
          margin-bottom: 20px;
      }

      .form-label {
          display: block;
          font-size: 1rem;
          font-weight: 600;
          color: #f2f2f2;
          margin-bottom: 8px;
          transition: all 0.3s ease;
      }

      .form-input {
          width: 100%;
          padding: 15px 20px;
          border: 2px solid rgba(255, 255, 255, 0.1);
          border-radius: 12px;
          background: rgba(255, 255, 255, 0.05);
          color: #f2f2f2;
          font-size: 1rem;
          transition: all 0.3s ease;
          backdrop-filter: blur(10px);
      }

      .form-input:focus {
          outline: none;
          border-color: #3b82f6;
          background: rgba(255, 255, 255, 0.1);
          box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
          transform: translateY(-2px);
      }

      .form-input::placeholder {
          color: rgba(255, 255, 255, 0.5);
          transition: color 0.3s ease;
      }

      .form-input:focus::placeholder {
          color: rgba(255, 255, 255, 0.3);
      }

      .input-focus-line {
          position: absolute;
          bottom: 0;
          left: 50%;
          width: 0;
          height: 2px;
          background: linear-gradient(90deg, #3b82f6, #8b5cf6);
          transition: all 0.3s ease;
          transform: translateX(-50%);
      }

      .form-input:focus + .input-focus-line {
          width: 100%;
      }

      .password-input-container {
          position: relative;
      }

      .password-toggle {
          position: absolute;
          right: 15px;
          top: 50%;
          transform: translateY(-50%);
          background: none;
          border: none;
          color: rgba(255, 255, 255, 0.6);
          cursor: pointer;
          padding: 5px;
          transition: all 0.3s ease;
      }

      .password-toggle:hover {
          color: #f2f2f2;
          transform: translateY(-50%) scale(1.1);
      }

      .form-checkbox {
          appearance: none;
          width: 20px;
          height: 20px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-radius: 6px;
          background: rgba(255, 255, 255, 0.05);
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
      }

      .form-checkbox:checked {
          background: #3b82f6;
          border-color: #3b82f6;
      }

      .form-checkbox:checked::after {
          content: 'âœ“';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          color: white;
          font-size: 14px;
          font-weight: bold;
      }

      .form-checkbox:hover {
          border-color: #3b82f6;
          transform: scale(1.05);
      }

      .auth-submit-btn {
          width: 100%;
          padding: 15px 30px;
          background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
          color: white;
          border: none;
          border-radius: 12px;
          font-size: 1.1rem;
          font-weight: 700;
          cursor: pointer;
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 10px;
      }

      .auth-submit-btn::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
          transition: left 0.5s ease;
      }

      .auth-submit-btn:hover::before {
          left: 100%;
      }

      .auth-submit-btn:hover {
          transform: translateY(-3px);
          box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
      }

      .auth-submit-btn:active {
          transform: translateY(-1px);
      }

      .btn-loader {
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .spinner {
          width: 20px;
          height: 20px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-top: 2px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
      }

      @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
      }

      .auth-divider {
          position: relative;
          text-align: center;
      }

      .auth-divider::before {
          content: '';
          position: absolute;
          top: 50%;
          left: 0;
          right: 0;
          height: 1px;
          background: rgba(255, 255, 255, 0.2);
      }

      .divider-text {
          background: #1a1a1a;
          padding: 0 20px;
          color: rgba(255, 255, 255, 0.6);
          font-size: 0.9rem;
      }

      .social-auth-buttons {
          margin-top: 20px;
      }

      .social-auth-btn {
          width: 100%;
          padding: 12px 20px;
          border: 2px solid rgba(255, 255, 255, 0.1);
          border-radius: 10px;
          background: rgba(255, 255, 255, 0.05);
          color: #f2f2f2;
          font-size: 1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
      }

      .social-auth-btn:hover {
          background: rgba(255, 255, 255, 0.1);
          border-color: rgba(255, 255, 255, 0.2);
          transform: translateY(-2px);
      }

      .google-btn:hover {
          border-color: #ea4335;
          color: #ea4335;
      }

      .apple-btn:hover {
          border-color: #a2aaad;
          color: #a2aaad;
      }

      /* Password Strength Indicator */
      .password-strength {
          margin-top: 10px;
      }

      .strength-bar {
          width: 100%;
          height: 4px;
          background: rgba(255, 255, 255, 0.1);
          border-radius: 2px;
          overflow: hidden;
      }

      .strength-fill {
          height: 100%;
          width: 0%;
          transition: all 0.3s ease;
          border-radius: 2px;
      }

      .strength-fill.weak { width: 25%; background: #ef4444; }
      .strength-fill.fair { width: 50%; background: #f59e0b; }
      .strength-fill.good { width: 75%; background: #10b981; }
      .strength-fill.strong { width: 100%; background: #059669; }

      .strength-text {
          color: rgba(255, 255, 255, 0.7);
          font-size: 0.8rem;
      }

      /* Enhanced Animations */
      @keyframes slideInDown {
          from {
              opacity: 0;
              transform: translateY(-30px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }

      @keyframes slideInUp {
          from {
              opacity: 0;
              transform: translateY(30px);
          }
          to {
              opacity: 1;
              transform: translateY(0);
          }
      }

      @keyframes slideInLeft {
          from {
              opacity: 0;
              transform: translateX(-30px);
          }
          to {
              opacity: 1;
              transform: translateX(0);
          }
      }

      @keyframes slideInRight {
          from {
              opacity: 0;
              transform: translateX(30px);
          }
          to {
              opacity: 1;
              transform: translateX(0);
          }
      }

      @keyframes bounceIn {
          0% {
              opacity: 0;
              transform: scale(0.3);
          }
          50% {
              opacity: 1;
              transform: scale(1.05);
          }
          70% {
              transform: scale(0.9);
          }
          100% {
              opacity: 1;
              transform: scale(1);
          }
      }

      @keyframes fadeInScale {
          0% {
              opacity: 0;
              transform: scale(0.8);
          }
          100% {
              opacity: 1;
              transform: scale(1);
          }
      }

      @keyframes float {
          0%, 100% {
              transform: translateY(0px);
          }
          50% {
              transform: translateY(-10px);
          }
      }

      @keyframes glow {
          0%, 100% {
              box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
          }
          50% {
              box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
          }
      }

      /* Smooth Page Transitions */
      .page-transition {
          animation: fadeInScale 0.6s ease-out;
      }

      .section-enter {
          animation: slideInUp 0.8s ease-out;
      }

      .section-enter-delayed {
          animation: slideInUp 0.8s ease-out 0.2s both;
      }

      .section-enter-more-delayed {
          animation: slideInUp 0.8s ease-out 0.4s both;
      }

      /* Enhanced Hover Effects */
      .hover-lift {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .hover-lift:hover {
          transform: translateY(-8px);
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .hover-glow {
          transition: all 0.3s ease;
      }

      .hover-glow:hover {
          box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
      }

      /* Smooth Scrolling and Parallax */
      html {
          scroll-behavior: smooth;
      }

      .parallax-bg {
          background-attachment: fixed;
          background-position: center;
          background-repeat: no-repeat;
          background-size: cover;
      }

      /* Enhanced Loading States */
      .loading-shimmer {
          background: linear-gradient(90deg, #2a2a2a 25%, #3a3a3a 50%, #2a2a2a 75%);
          background-size: 200% 100%;
          animation: shimmer 1.5s infinite;
      }

      @keyframes shimmer {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
      }

      /* Micro-interactions */
      .click-ripple {
          position: relative;
          overflow: hidden;
      }

      .click-ripple::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          width: 0;
          height: 0;
          border-radius: 50%;
          background: rgba(255, 255, 255, 0.3);
          transform: translate(-50%, -50%);
          transition: width 0.6s, height 0.6s;
      }

      .click-ripple:active::after {
          width: 300px;
          height: 300px;
      }

      /* Enhanced Focus States */
      .focus-visible {
          outline: none;
          box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
      }

      /* Smooth Button Transitions */
      .btn-smooth {
          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-smooth:hover {
          transform: translateY(-2px) scale(1.02);
      }

      .btn-smooth:active {
          transform: translateY(0) scale(0.98);
      }

      /* Enhanced Card Animations */
      .card-hover {
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .card-hover:hover {
          transform: translateY(-10px) scale(1.02);
          box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
      }

      /* Floating Animation for Icons */
      .float-animation {
          animation: float 3s ease-in-out infinite;
      }

      .float-animation-delayed {
          animation: float 3s ease-in-out infinite 1.5s;
      }

      /* Glow Effects */
      .glow-effect {
          animation: glow 2s ease-in-out infinite alternate;
      }

      /* Enhanced Form Animations */
      .form-group {
          animation: slideInUp 0.6s ease-out;
      }

      .form-group:nth-child(1) { animation-delay: 0.1s; }
      .form-group:nth-child(2) { animation-delay: 0.2s; }
      .form-group:nth-child(3) { animation-delay: 0.3s; }
      .form-group:nth-child(4) { animation-delay: 0.4s; }
      .form-group:nth-child(5) { animation-delay: 0.5s; }

      /* Responsive Enhancements */
      @media (max-width: 768px) {
          .auth-form-container {
              padding: 30px 20px;
              margin: 20px;
          }

          .form-row {
              grid-template-columns: 1fr;
          }

          .auth-submit-btn {
              padding: 12px 25px;
              font-size: 1rem;
          }

          .social-auth-btn {
              padding: 10px 15px;
              font-size: 0.9rem;
          }
      }

      /* Enhanced Product Features */
      .product-badges {
        z-index: 10;
      }

              .comparison-btn {
          position: absolute;
          top: 2;
          right: 2;
          background: rgba(0, 0, 0, 0.7);
          color: white;
          border: none;
          width: 32px;
          height: 32px;
          border-radius: 50%;
          cursor: pointer;
          transition: all 0.3s ease;
          z-index: 10;
        }

      .comparison-btn:hover {
        background: rgba(59, 130, 246, 0.8);
        transform: scale(1.1);
      }

      .comparison-btn.active {
        background: rgb(59, 130, 246);
        transform: scale(1.1);
      }

      .product-tags {
        margin-bottom: 0.75rem;
      }

      .product-tags span {
        background: rgba(55, 65, 81, 0.8);
        color: #d1d5db;
        font-size: 0.75rem;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        transition: all 0.3s ease;
      }

      .product-tags span:hover {
        background: rgba(75, 85, 99, 0.8);
        transform: translateY(-1px);
      }

      /* Comparison Modal Styles */
      .comparison-table-container {
        max-height: 70vh;
        overflow-y: auto;
      }

      .comparison-table {
        border-collapse: collapse;
      }

      .comparison-table th,
      .comparison-table td {
        border: 1px solid #4b5563;
        padding: 0.75rem;
        text-align: left;
        vertical-align: top;
      }

      .comparison-table th {
        background: rgba(31, 41, 55, 0.8);
        position: sticky;
        top: 0;
        z-index: 10;
      }

      .product-comparison-header {
        text-align: center;
        padding: 0.5rem;
      }

      .product-comparison-header img {
        border-radius: 0.5rem;
        border: 2px solid #374151;
      }

      .product-comparison-header h4 {
        margin: 0.5rem 0;
        font-size: 0.875rem;
      }

      /* Advanced Search Modal Styles */
      .search-filters-grid {
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      }

      .filter-group {
        margin-bottom: 1.5rem;
      }

      .filter-label {
        display: block;
        color: #f3f4f6;
        font-weight: 600;
        margin-bottom: 0.5rem;
        font-size: 0.875rem;
      }

      .filter-select {
        width: 100%;
        padding: 0.75rem;
        background: #374151;
        border: 1px solid #4b5563;
        border-radius: 0.5rem;
        color: #f3f4f6;
        font-size: 0.875rem;
        transition: all 0.3s ease;
      }

      .filter-select:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
      }

              .checkbox-item {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          color: #d1d5db;
          font-size: 0.875rem;
          cursor: pointer;
          transition: color 0.3s ease;
        }

      .checkbox-item:hover {
        color: #f3f4f6;
      }

      .checkbox-item input[type="checkbox"] {
        width: 1rem;
        height: 1rem;
        accent-color: #3b82f6;
      }

      .price-range-slider {
        position: relative;
        padding: 1rem 0;
      }

      .range-slider {
        width: 100%;
        height: 4px;
        background: #4b5563;
        border-radius: 2px;
        outline: none;
        margin: 0.5rem 0;
        -webkit-appearance: none;
      }

      .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        background: #3b82f6;
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .range-slider::-webkit-slider-thumb:hover {
        background: #2563eb;
        transform: scale(1.1);
      }

      .range-slider::-moz-range-thumb {
        width: 20px;
        height: 20px;
        background: #3b82f6;
        border-radius: 50%;
        cursor: pointer;
        border: none;
        transition: all 0.3s ease;
      }

      .range-slider::-moz-range-thumb:hover {
        background: #2563eb;
        transform: scale(1.1);
      }

      .price-display {
        text-align: center;
        color: #f3f4f6;
        font-weight: 600;
        font-size: 0.875rem;
        margin-top: 0.5rem;
      }

      .search-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
      }

      /* Dashboard Styles */
      .dashboard-tabs {
        border-bottom: 1px solid #4b5563;
        margin-bottom: 1.5rem;
      }

      .dashboard-tab {
        padding: 0.75rem 1.5rem;
        background: none;
        border: none;
        color: #9ca3af;
        cursor: pointer;
        transition: all 0.3s ease;
        border-bottom: 2px solid transparent;
        font-weight: 500;
      }

      .dashboard-tab:hover {
        color: #d1d5db;
      }

      .dashboard-tab.active {
        color: #3b82f6;
        border-bottom-color: #3b82f6;
      }

              .dashboard-tab-content {
          display: none;
        }

        .dashboard-tab-content.active {
          display: block;
        }

      .dashboard-stats {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      }

      .stat-card {
        background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        border: 1px solid #4b5563;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        border-color: #3b82f6;
      }

      .stat-icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
      }

      .stat-number {
        color: #f3f4f6;
        font-weight: 700;
        margin-bottom: 0.25rem;
      }

      .stat-label {
        color: #9ca3af;
        font-size: 0.875rem;
        font-weight: 500;
      }

      .recent-activity {
        background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        border: 1px solid #4b5563;
      }

      .activity-item {
        padding: 0.5rem 0;
        border-bottom: 1px solid #4b5563;
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .wishlist-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }

      .wishlist-item {
        background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        border: 1px solid #4b5563;
        transition: all 0.3s ease;
      }

      .wishlist-item:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        border-color: #3b82f6;
      }

      .preferences-form {
        background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        padding: 1.5rem;
        border-radius: 0.75rem;
        border: 1px solid #4b5563;
      }

      .preference-group {
        margin-bottom: 1.5rem;
      }

      .preference-label {
        display: block;
        color: #f3f4f6;
        font-weight: 600;
        margin-bottom: 0.75rem;
        font-size: 0.875rem;
      }

      .toggle-group {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }

      .toggle-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        color: #d1d5db;
        font-size: 0.875rem;
        cursor: pointer;
        transition: color 0.3s ease;
        padding: 0.5rem;
        border-radius: 0.5rem;
        transition: all 0.3s ease;
      }

      .toggle-item:hover {
        color: #f3f4f6;
        background: rgba(59, 130, 246, 0.1);
      }

      .toggle-item input[type="checkbox"] {
        width: 1.25rem;
        height: 1.25rem;
        accent-color: #3b82f6;
      }

      /* Size Recommendation Tool Styles */
      .measurement-form {
        background: linear-gradient(135deg, #374151 0%, #1f2937 100%);
        padding: 1.5rem;
        border-radius: 0.75rem;
        border: 1px solid #4b5563;
      }

      .measurement-input-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .measurement-input {
        width: 4rem;
        padding: 0.75rem;
        background: #374151;
        border: 1px solid #4b5563;
        border-radius: 0.5rem;
        color: #f3f4f6;
        text-align: center;
        font-size: 0.875rem;
        transition: all 0.3s ease;
      }

      .measurement-input:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .measurement-unit {
        color: #9ca3af;
        font-size: 0.875rem;
        font-weight: 500;
        min-width: 1.5rem;
      }

      .form-select {
        width: 100%;
        padding: 0.75rem;
        background: #374151;
        border: 1px solid #4b5563;
        border-radius: 0.5rem;
        color: #f3f4f6;
        font-size: 0.875rem;
        transition: all 0.3s ease;
      }

      .form-select:focus {
        outline: none;
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      .fit-options {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.75rem;
      }

      .fit-option {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .fit-radio {
        width: 1.25rem;
        height: 1.25rem;
        accent-color: #3b82f6;
      }

      .fit-label {
        color: #d1d5db;
        font-size: 0.875rem;
        text-align: center;
        transition: color 0.3s ease;
      }

      .fit-option:hover .fit-label {
        color: #f3f4f6;
      }

      .recommendation-result {
        background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        border: 1px solid #3b82f6;
        animation: fadeInScale 0.5s ease-out;
      }

      .recommendation-details {
        color: #f3f4f6;
      }

      .recommendation-details > div {
        padding: 0.5rem 0;
        border-bottom: 1px solid rgba(59, 130, 246, 0.3);
      }

      .recommendation-details > div:last-child {
        border-bottom: none;
      }

      /* Comparison Section Styles */
      .comparison-section {
        background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        padding: 1rem 1.5rem;
        border-radius: 0.75rem;
        border: 1px solid #3b82f6;
        margin-bottom: 1.5rem;
      }

      .comparison-info {
        display: flex;
        align-items: center;
        font-size: 0.875rem;
      }

      /* Enhanced Product Card Animations */
      .product-card {
        animation: fadeInScale 0.6s ease-out forwards;
        opacity: 0;
        transform: scale(0.9);
      }

      .product-card:nth-child(1) { animation-delay: 0.1s; }
      .product-card:nth-child(2) { animation-delay: 0.2s; }
      .product-card:nth-child(3) { animation-delay: 0.3s; }
      .product-card:nth-child(4) { animation-delay: 0.4s; }
      .product-card:nth-child(5) { animation-delay: 0.5s; }
      .product-card:nth-child(6) { animation-delay: 0.6s; }

      /* Responsive Design for New Features */
      @media (max-width: 768px) {
        .comparison-section {
          flex-direction: column;
          gap: 1rem;
          text-align: center;
        }

        .search-filters-grid {
          grid-template-columns: 1fr;
        }

        .dashboard-stats {
          grid-template-columns: 1fr;
        }

        .wishlist-grid {
          grid-template-columns: 1fr;
        }

        .fit-options {
          grid-template-columns: 1fr;
        }

        .measurement-input-group {
          flex-wrap: wrap;
          justify-content: center;
        }

        .search-actions {
          flex-direction: column;
        }

        .comparison-table-container {
          max-height: 60vh;
        }

        .comparison-table {
          font-size: 0.75rem;
        }

        .comparison-table th,
        .comparison-table td {
          padding: 0.5rem;
        }
      }

      @media (max-width: 480px) {
        .dashboard-tabs {
          flex-wrap: wrap;
        }

        .dashboard-tab {
          flex: 1;
          min-width: 120px;
          text-align: center;
          font-size: 0.875rem;
        }

        .stat-card {
          padding: 1rem;
        }

        .stat-icon {
          font-size: 1.5rem;
        }

        .stat-number {
          font-size: 1.5rem;
        }
      }

      /* Loading States and Micro-interactions */
      .loading-shimmer {
        background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
        background-size: 200% 100%;
        animation: shimmer 1.5s infinite;
      }

      @keyframes shimmer {
        0% { background-position: -200% 0; }
        100% { background-position: 200% 0; }
      }

      .hover-lift:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
      }

      .hover-glow:hover {
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
      }

      /* Enhanced Focus States */
      .focus-visible:focus {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
      }

      /* Smooth Transitions */
      .btn-smooth {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn-smooth:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      /* Card Hover Effects */
      .card-hover {
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .card-hover:hover {
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      /* Floating Animations */
      .float-animation {
        animation: float 3s ease-in-out infinite;
      }

      .float-animation-delayed {
        animation: float 3s ease-in-out infinite;
        animation-delay: 1.5s;
      }

      @keyframes float {
        0%, 100% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
      }

      /* Glow Effects */
      .glow-effect {
        position: relative;
        overflow: hidden;
      }

      .glow-effect::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.2), transparent);
        transition: left 0.5s;
      }

      .glow-effect:hover::before {
        left: 100%;
      }
    </style>
  </head>
  <body>
    <div id="transitionOverlay" class="transition-overlay"></div>
    <div id="message-box" role="alert">
        <i class="fas fa-check-circle"></i>
        <span id="message-text"></span>
    </div>

    <!-- Hamburger Menu Icon (Mobile Only) -->
    <div class="hamburger-menu-icon" id="hamburgerIcon">
        <i class="fas fa-bars"></i>
    </div>

    <!-- Profile Menu Container -->
    <div class="profile-menu-container">
        <div class="profile-icon">
            <i class="fas fa-user-circle"></i>
        </div>
        <div class="profile-dropdown">
            <a href="#sign-in-main" class="dropdown-item">Sign In</a>
            <a href="#sign-up-main" class="dropdown-item">Sign Up</a>
        </div>
    </div>

    <!-- Mobile Navigation Overlay -->
    <div id="mobile-nav-overlay">
        <button class="close-btn" id="mobileNavCloseBtn">&times;</button>
        <ul>
            <li data-page-id="home-main" class="mobile-nav-item"><a href="#home-main">Home</a></li>
            <li data-page-id="shop-page" class="mobile-nav-item"><a href="#shop-page">Shop</a></li>
            <li data-page-id="about-us-main" class="mobile-nav-item"><a href="#about-us-main">About Us</a></li>
            <li data-page-id="cart-main" class="mobile-nav-item"><a href="#cart-main">Cart</a></li>
            <li data-page-id="contact-main" class="mobile-nav-item"><a href="#contact-main">Contact</a></li>
            <li data-page-id="support-main" id="mobile-support-nav-item" class="mobile-nav-item"><a href="#support-main">Support</a></li>
            <li data-page-id="settings-main" class="mobile-nav-item"><a href="#settings-main">Settings</a></li>
        </ul>
    </div>

    <section id="intro-section">
      <!-- The logo container now directly animates the image within -->
      <div class="logo">
          <img src="logo.png" alt="Ultre Logo" onerror="this.onerror=null;this.src='https://placehold.co/100x100/000000/FFFFFF?text=Logo';">
      </div>
              <div class="tagline" id="mainTagline">This is Ultre.</div>
        <button class="shop-button" id="shopButton" style="animation-delay: 2.8s;">Head to the shop.</button>
    </section>

    <div id="main-website-content-wrapper" class="hidden-content">
      <section id="home-main" class="active-page">
        <div class="info-title">Welcome to Ultre!</div>
        <div class="info-content">
          Your journey into minimalist style and timeless energy starts here.
          Explore our collections and discover pieces designed for those who move different.
        </div>
        
        <!-- Newsletter Signup -->
        <div class="newsletter-signup mt-12 max-w-2xl mx-auto">
          <div class="bg-gray-800 p-8 rounded-xl border border-gray-700">
            <h3 class="text-2xl font-bold text-white mb-3">Stay in the Loop</h3>
            <p class="text-gray-300 mb-6">Get early access to new drops, exclusive offers, and style inspiration delivered to your inbox.</p>
            <div class="flex flex-col sm:flex-row gap-3">
              <input type="email" id="newsletter-email" placeholder="Enter your email" class="flex-1 p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-white">
              <button id="newsletter-signup-btn" class="shop-button whitespace-nowrap">Subscribe</button>
            </div>
            <p class="text-xs text-gray-500 mt-3">No spam, ever. Unsubscribe anytime.</p>
          </div>
        </div>

        <!-- Featured Blog Posts -->
        <div class="featured-blog mt-16 max-w-6xl mx-auto">
          <h3 class="text-2xl font-bold text-white mb-8 text-center">Latest from the Blog</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <article class="blog-card bg-gray-800 rounded-xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 cursor-pointer">
              <img src="https://placehold.co/400x250/333333/FFFFFF?text=Style+Guide" alt="Style Guide" class="w-full h-48 object-cover">
              <div class="p-6">
                <div class="text-sm text-blue-400 mb-2">Style Tips</div>
                <h4 class="text-xl font-bold text-white mb-3">5 Ways to Style Your Ultre Essentials</h4>
                <p class="text-gray-300 text-sm mb-4">Discover versatile ways to wear your favorite pieces from day to night...</p>
                <div class="flex items-center justify-between">
                  <span class="text-gray-500 text-sm">3 min read</span>
                  <button class="text-blue-400 hover:text-blue-300 transition-colors">Read More â†’</button>
                </div>
              </div>
            </article>

            <article class="blog-card bg-gray-800 rounded-xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 cursor-pointer">
              <img src="https://placehold.co/400x250/555555/FFFFFF?text=Sustainability" alt="Sustainability" class="w-full h-48 object-cover">
              <div class="p-6">
                <div class="text-sm text-green-400 mb-2">Sustainability</div>
                <h4 class="text-xl font-bold text-white mb-3">Our Commitment to Ethical Fashion</h4>
                <p class="text-gray-300 text-sm mb-4">Learn about our sustainable practices and how we're reducing our environmental impact...</p>
                <div class="flex items-center justify-between">
                  <span class="text-gray-500 text-sm">5 min read</span>
                  <button class="text-blue-400 hover:text-blue-300 transition-colors">Read More â†’</button>
                </div>
              </div>
            </article>

            <article class="blog-card bg-gray-800 rounded-xl overflow-hidden hover:transform hover:scale-105 transition-all duration-300 cursor-pointer">
              <img src="https://placehold.co/400x250/777777/FFFFFF?text=Behind+Scenes" alt="Behind Scenes" class="w-full h-48 object-cover">
              <div class="p-6">
                <div class="text-sm text-purple-400 mb-2">Behind the Scenes</div>
                <h4 class="text-xl font-bold text-white mb-3">The Story Behind Our Latest Collection</h4>
                <p class="text-gray-300 text-sm mb-4">Go behind the scenes and see how our latest pieces came to life...</p>
                <div class="flex items-center justify-between">
                  <span class="text-gray-500 text-sm">4 min read</span>
                  <button class="text-blue-400 hover:text-blue-300 transition-colors">Read More â†’</button>
                </div>
              </div>
            </article>
          </div>
        </div>

        <!-- Social Proof Section -->
        <div class="social-proof mt-16 max-w-4xl mx-auto">
          <h3 class="text-2xl font-bold text-white mb-8 text-center">What Our Community Says</h3>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <div class="testimonial bg-gray-800 p-6 rounded-xl text-center">
              <div class="text-yellow-400 text-2xl mb-3">â˜…â˜…â˜…â˜…â˜…</div>
              <p class="text-gray-300 mb-4">"Ultre pieces are my go-to for everyday style. The quality is incredible and they always look fresh."</p>
              <div class="text-white font-semibold">- Sarah M.</div>
            </div>
            <div class="testimonial bg-gray-800 p-6 rounded-xl text-center">
              <div class="text-yellow-400 text-2xl mb-3">â˜…â˜…â˜…â˜…â˜…</div>
              <p class="text-gray-300 mb-4">"Finally found a brand that understands minimalism isn't boring. These pieces have personality."</p>
              <div class="text-white font-semibold">- Alex K.</div>
            </div>
            <div class="testimonial bg-gray-800 p-6 rounded-xl text-center">
              <div class="text-yellow-400 text-2xl mb-3">â˜…â˜…â˜…â˜…â˜…</div>
              <p class="text-gray-300 mb-4">"The fit is perfect and the materials feel premium. Worth every penny for the quality."</p>
              <div class="text-white font-semibold">- Jordan L.</div>
            </div>
          </div>
        </div>
      </section>

      <section id="shop-page">
          <div class="info-title">Welcome to the Shop!</div>
          <div id="shop-content" class="w-full max-w-6xl mx-auto p-4">
              <!-- Search and Filter Bar -->
              <div class="search-filter-container mb-8">
                  <div class="search-bar mb-4">
                      <div class="relative">
                          <input type="text" id="product-search" placeholder="Search products..." class="w-full p-3 pl-12 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:border-white">
                          <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                      </div>
                  </div>
                  
                  <div class="filter-controls grid grid-cols-2 md:grid-cols-4 gap-4">
                      <select id="category-filter" class="p-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:border-white">
                          <option value="">All Categories</option>
                          <option value="tops">Tops</option>
                          <option value="bottoms">Bottoms</option>
                          <option value="outerwear">Outerwear</option>
                          <option value="accessories">Accessories</option>
                      </select>
                      
                      <select id="price-filter" class="p-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:border-white">
                          <option value="">All Prices</option>
                          <option value="0-25">$0 - $25</option>
                          <option value="25-50">$25 - $50</option>
                          <option value="50-100">$50 - $100</option>
                          <option value="100+">$100+</option>
                      </select>
                      
                      <select id="size-filter" class="p-3 rounded-lg bg-gray-800 text-white border border-gray-600 focus:outline-none focus:border-white">
                          <option value="">All Sizes</option>
                          <option value="XS">XS</option>
                          <option value="S">S</option>
                          <option value="M">M</option>
                          <option value="L">L</option>
                          <option value="XL">XL</option>
                          <option value="XXL">XXL</option>
                      </select>
                      
                      <button id="clear-filters" class="p-3 rounded-lg bg-gray-700 text-white border border-gray-600 hover:bg-gray-600 transition-colors">
                          Clear Filters
                      </button>
                  </div>
              </div>

              <!-- Results Summary -->
              <div id="results-summary" class="text-gray-400 mb-6 hidden">
                  <span id="results-count">0</span> products found
                  <button id="view-wishlist" class="ml-4 text-blue-400 hover:text-blue-300 transition-colors">
                      <i class="fas fa-heart"></i> View Wishlist (<span id="wishlist-count">0</span>)
                  </button>
              </div>

              <div id="loading-indicator" class="text-gray-400 text-lg">Loading items...</div>
              <div id="status-message" class="text-yellow-400 text-lg my-4"></div>
              <div id="no-stock-message" class="hidden text-gray-400 text-lg flex flex-col items-center justify-center py-10">
                  <span class="text-6xl mb-4">ðŸ˜”</span>
                  There isn't anything in stock right now, check again soon!
              </div>
              
              <div id="items-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-8">
              </div>
          </div>
      </section>

      <section id="item-detail-page">
          <div class="info-title">Product Details</div>
          <div id="item-detail-page-content">
              <div class="item-detail-left">
                  <!-- Product Image Gallery -->
                  <div class="product-gallery mb-6">
                      <div class="main-image-container relative">
                          <img id="detail-item-image" src="" alt="Product Image" class="item-detail-image">
                          <button id="zoom-btn" class="absolute top-2 right-2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all">
                              <i class="fas fa-search-plus"></i>
                          </button>
                      </div>
                      <div id="thumbnail-gallery" class="flex gap-2 mt-3 justify-center">
                          <!-- Thumbnails will be populated dynamically -->
                      </div>
                  </div>

                  <h3 id="detail-item-name" class="item-detail-name"></h3>
                  <p id="detail-item-price" class="item-detail-price"></p>
                  
                  <!-- Size Selector with Chart -->
                  <div class="size-selector w-full max-w-[300px] text-left mb-4">
                      <label for="item-size" class="block text-gray-300 font-semibold mb-2">Select Size:</label>
                      <select id="item-size" class="w-full p-2 rounded-md bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-white">
                          <option value="XS">XS</option>
                          <option value="S">Small</option>
                          <option value="M">Medium</option>
                          <option value="L">Large</option>
                          <option value="XL">X-Large</option>
                          <option value="XXL">XX-Large</option>
                      </select>
                      <button id="size-chart-btn" class="text-blue-400 text-sm hover:text-blue-300 mt-1">
                          <i class="fas fa-ruler"></i> Size Chart
                      </button>
                  </div>

                  <!-- Quantity Selector -->
                  <div class="quantity-selector w-full max-w-[300px] text-left mb-4">
                      <label class="block text-gray-300 font-semibold mb-2">Quantity:</label>
                      <div class="flex items-center gap-3">
                          <button id="quantity-decrease" class="w-8 h-8 rounded-full bg-gray-600 text-white hover:bg-gray-500 transition-colors">-</button>
                          <span id="quantity-display" class="text-xl font-semibold text-white min-w-[2rem] text-center">1</span>
                          <button id="quantity-increase" class="w-8 h-8 rounded-full bg-gray-600 text-white hover:bg-gray-500 transition-colors">+</button>
                      </div>
                  </div>

                  <button id="detail-add-to-cart-btn" class="shop-button w-full mb-3">Add to Cart</button>
                  <button id="add-to-wishlist-btn" class="w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 hover:bg-gray-600 transition-colors">
                      <i class="far fa-heart"></i> Add to Wishlist
                  </button>
              </div>
              
              <div class="item-detail-right">
                  <p id="detail-item-description" class="item-detail-description mb-6"></p>
                  
                  <!-- Product Features -->
                  <div class="product-features mb-6">
                      <h4 class="text-xl font-semibold text-white mb-3">Features</h4>
                      <ul class="space-y-2 text-gray-300">
                          <li><i class="fas fa-check text-green-400 mr-2"></i>Premium quality materials</li>
                          <li><i class="fas fa-check text-green-400 mr-2"></i>Designed for comfort</li>
                          <li><i class="fas fa-check text-green-400 mr-2"></i>Versatile styling</li>
                          <li><i class="fas fa-check text-green-400 mr-2"></i>Easy care instructions</li>
                      </ul>
                  </div>

                  <!-- Customer Reviews -->
                  <div class="customer-reviews mb-6">
                      <h4 class="text-xl font-semibold text-white mb-3">Customer Reviews</h4>
                      <div class="reviews-summary mb-3">
                          <div class="flex items-center gap-2 mb-2">
                              <div class="flex text-yellow-400">
                                  <i class="fas fa-star"></i>
                                  <i class="fas fa-star"></i>
                                  <i class="fas fa-star"></i>
                                  <i class="fas fa-star"></i>
                                  <i class="fas fa-star"></i>
                              </div>
                              <span class="text-gray-300">4.8/5 (24 reviews)</span>
                          </div>
                      </div>
                      <div id="reviews-container" class="space-y-3 max-h-40 overflow-y-auto">
                          <!-- Reviews will be populated dynamically -->
                      </div>
                  </div>
              </div>
          </div>
          
          <!-- Related Products -->
          <div class="related-products mt-12">
              <h3 class="text-2xl font-bold text-white mb-6 text-center">You Might Also Like</h3>
              <div id="related-products-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
                  <!-- Related products will be populated dynamically -->
              </div>
          </div>

          <button id="back-to-shop-btn" class="back-to-shop-btn mt-8">â† Back to Shop</button>
      </section>

      <section id="about-us-main">
        <div class="info-title">About Us</div>
        <div class="info-content" id="aboutUsContent">
          Ultre isn't just a brand â€” it's a mindset. Rooted in simplicity, built for the bold.
          We believe in creating essential pieces that resonate with those who value authenticity and understated strength.
          <br><br>
          No loud flex, no trend chasing. Just timeless energy and pieces that bring the "you" out of you.
          Our designs are inspired by a minimalist aesthetic, focusing on clean lines and versatile pieces that fit seamlessly into any lifestyle.
          <br><br>
          Crafted for the ones who move different. Designed to last, not just be seen.
          We prioritize quality materials and meticulous attention to detail, ensuring every Ultre item stands the test of time.
          <br><br>
          We take many minutes and hours out of our days to bring you all the clothing and quality you deserve with a price that can put a smile on your face.
          Join us on our journey to make a new era of affordable and stylish clothing.
        </div>
      </section>

      <section id="cart-main">
        <div class="info-title">Your Cart</div>
        <div id="cart-content" class="w-full max-w-6xl mx-auto p-4">
            <!-- Cart Progress -->
            <div class="cart-progress mb-8">
                <div class="flex items-center justify-center space-x-4">
                    <div class="progress-step active">
                        <div class="progress-circle">1</div>
                        <span class="progress-label">Cart</span>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step">
                        <div class="progress-circle">2</div>
                        <span class="progress-label">Shipping</span>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step">
                        <div class="progress-circle">3</div>
                        <span class="progress-label">Payment</span>
                    </div>
                    <div class="progress-line"></div>
                    <div class="progress-step">
                        <div class="progress-circle">4</div>
                        <span class="progress-label">Confirmation</span>
                    </div>
                </div>
            </div>

            <div id="empty-cart-message" class="text-gray-400 text-lg hidden flex flex-col items-center justify-center py-10">
                <span class="text-6xl mb-4">ðŸ›’</span>
                <p class="text-xl mb-4">Your cart is currently empty</p>
                <p class="text-gray-500 mb-6">Start shopping to add some Ultre essentials!</p>
                <button id="start-shopping-btn" class="shop-button">Start Shopping</button>
            </div>

            <div id="cart-items-container" class="hidden">
                <div id="cart-items-list" class="space-y-4 text-left mb-8">
                </div>
                
                <!-- Cart Summary -->
                <div class="cart-summary bg-gray-800 rounded-xl p-6">
                    <h3 class="text-xl font-bold text-white mb-4">Order Summary</h3>
                    
                    <div class="summary-row flex justify-between mb-2">
                        <span class="text-gray-300">Subtotal:</span>
                        <span class="text-white">$<span id="subtotal-amount">0.00</span></span>
                    </div>
                    
                    <div class="summary-row flex justify-between mb-2">
                        <span class="text-gray-300">Shipping:</span>
                        <span class="text-white">$<span id="shipping-amount">0.00</span></span>
                    </div>
                    
                    <div class="summary-row flex justify-between mb-2">
                        <span class="text-gray-300">Tax:</span>
                        <span class="text-white">$<span id="tax-amount">0.00</span></span>
                    </div>
                    
                    <div class="summary-row flex justify-between mb-4 pt-4 border-t border-gray-700">
                        <span class="text-xl font-bold text-white">Total:</span>
                        <span class="text-2xl font-bold text-white">$<span id="total-amount">0.00</span></span>
                    </div>

                    <!-- Shipping Options -->
                    <div class="shipping-options mb-6">
                        <h4 class="text-lg font-semibold text-white mb-3">Shipping Options</h4>
                        <div class="space-y-3">
                            <label class="flex items-center justify-between p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors">
                                <div>
                                    <input type="radio" name="shipping" value="standard" checked class="mr-3">
                                    <span class="text-white font-medium">Standard Shipping</span>
                                    <span class="text-gray-400 text-sm block">5-7 business days</span>
                                </div>
                                <span class="text-white">$5.99</span>
                            </label>
                            <label class="flex items-center justify-between p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors">
                                <div>
                                    <input type="radio" name="shipping" value="express" class="mr-3">
                                    <span class="text-white font-medium">Express Shipping</span>
                                    <span class="text-gray-400 text-sm block">2-3 business days</span>
                                </div>
                                <span class="text-white">$12.99</span>
                            </label>
                            <label class="flex items-center justify-between p-3 bg-gray-700 rounded-lg cursor-pointer hover:bg-gray-600 transition-colors">
                                <div>
                                    <input type="radio" name="shipping" value="overnight" class="mr-3">
                                    <span class="text-white font-medium">Overnight</span>
                                    <span class="text-gray-400 text-sm block">Next business day</span>
                                </div>
                                <span class="text-white">$24.99</span>
                            </label>
                        </div>
                    </div>

                    <!-- Promo Code -->
                    <div class="promo-code mb-6">
                        <div class="flex gap-3">
                            <input type="text" id="promo-code-input" placeholder="Enter promo code" class="flex-1 p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:outline-none focus:border-white">
                            <button id="apply-promo-btn" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Apply</button>
                        </div>
                        <div id="promo-message" class="text-sm mt-2 hidden"></div>
                    </div>

                    <div class="flex gap-4">
                        <button id="checkout-btn" class="shop-button flex-1">Proceed to Checkout</button>
                        <button id="save-for-later-btn" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors">Save for Later</button>
                    </div>
                </div>
            </div>
        </div>
      </section>

      <section id="contact-main">
        <div class="info-title">Get in Touch</div>
        <div class="info-content">
          We make essentials. Not extras. Wear it like you mean it.
          For inquiries or collaborations, feel free to reach out to us.
          <div class="contact-details">
            Email: <a href="mailto:info@ultre.com">info@ultre.com</a><br>
            Follow us on social media! (Links coming soon)
          </div>
        </div>
      </section>

      <section id="sign-in-main">
          <div class="info-title">Welcome Back</div>
          <div class="auth-form-container">
              <div class="auth-header mb-6 text-center">
                  <div class="auth-icon mb-4">
                      <i class="fas fa-user-circle text-6xl text-blue-400"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-white mb-2">Sign In to Your Account</h3>
                  <p class="text-gray-400">Access your personalized Ultre experience</p>
              </div>

              <div id="signin-error-message" class="error-message hidden"></div>
              
              <form id="signin-form" class="space-y-6">
                  <div class="form-group">
                      <label for="signin-email" class="form-label">
                          <i class="fas fa-envelope mr-2 text-blue-400"></i>Email Address
                      </label>
                      <input type="email" id="signin-email" placeholder="your@example.com" required class="form-input">
                      <div class="input-focus-line"></div>
                  </div>
                  
                  <div class="form-group">
                      <label for="signin-password" class="form-label">
                          <i class="fas fa-lock mr-2 text-blue-400"></i>Password
                      </label>
                      <div class="password-input-container">
                          <input type="password" id="signin-password" placeholder="Enter your password" required class="form-input">
                          <button type="button" class="password-toggle" onclick="togglePassword('signin-password')">
                              <i class="fas fa-eye"></i>
                          </button>
                      </div>
                      <div class="input-focus-line"></div>
                  </div>

                  <div class="flex items-center justify-between">
                      <label class="flex items-center">
                          <input type="checkbox" id="remember-me" class="form-checkbox">
                          <span class="ml-2 text-gray-300">Remember me</span>
                      </label>
                      <a href="#" class="form-link text-blue-400 hover:text-blue-300 transition-colors">Forgot Password?</a>
                  </div>

                  <button type="submit" id="signin-btn" class="auth-submit-btn">
                      <span class="btn-text">Sign In</span>
                      <div class="btn-loader hidden">
                          <div class="spinner"></div>
                      </div>
                  </button>
              </form>

              <div class="auth-divider my-6">
                  <span class="divider-text">or continue with</span>
              </div>

              <div class="social-auth-buttons space-y-3">
                  <button class="social-auth-btn google-btn">
                      <i class="fab fa-google mr-3"></i>
                      Continue with Google
                  </button>
                  <button class="social-auth-btn apple-btn">
                      <i class="fab fa-apple mr-3"></i>
                      Continue with Apple
                  </button>
              </div>

              <p class="text-center text-gray-400 text-sm mt-6">
                  Don't have an account? 
                  <a href="#sign-up-main" class="form-link text-blue-400 hover:text-blue-300 transition-colors font-semibold">Sign Up</a>
              </p>
          </div>
      </section>

      <section id="sign-up-main">
          <div class="info-title">Join the Ultre Family</div>
          <div class="auth-form-container">
              <div class="auth-header mb-6 text-center">
                  <div class="auth-icon mb-4">
                      <i class="fas fa-user-plus text-6xl text-green-400"></i>
                  </div>
                  <h3 class="text-2xl font-bold text-white mb-2">Create Your Account</h3>
                  <p class="text-gray-400">Start your journey with Ultre</p>
              </div>

              <div id="signup-error-message" class="error-message hidden"></div>
              
              <form id="signup-form" class="space-y-6">
                  <div class="form-row grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div class="form-group">
                          <label for="signup-first-name" class="form-label">
                              <i class="fas fa-user mr-2 text-green-400"></i>First Name
                          </label>
                          <input type="text" id="signup-first-name" placeholder="Your first name" required class="form-input">
                          <div class="input-focus-line"></div>
                      </div>
                      
                      <div class="form-group">
                          <label for="signup-last-name" class="form-label">
                              <i class="fas fa-user mr-2 text-green-400"></i>Last Name
                          </label>
                          <input type="text" id="signup-last-name" placeholder="Your last name" required class="form-input">
                          <div class="input-focus-line"></div>
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="signup-email" class="form-label">
                          <i class="fas fa-envelope mr-2 text-green-400"></i>Email Address
                      </label>
                      <input type="email" id="signup-email" placeholder="your@example.com" required class="form-input">
                      <div class="input-focus-line"></div>
                  </div>
                  
                  <div class="form-group">
                      <label for="signup-password" class="form-label">
                          <i class="fas fa-lock mr-2 text-green-400"></i>Password
                      </label>
                      <div class="password-input-container">
                          <input type="password" id="signup-password" placeholder="Create a strong password" required class="form-input">
                          <button type="button" class="password-toggle" onclick="togglePassword('signup-password')">
                              <i class="fas fa-eye"></i>
                          </button>
                      </div>
                      <div class="input-focus-line"></div>
                      <div class="password-strength mt-2">
                          <div class="strength-bar">
                              <div class="strength-fill" id="password-strength-fill"></div>
                          </div>
                          <p class="strength-text text-xs mt-1" id="password-strength-text">Password strength</p>
                      </div>
                  </div>

                  <div class="form-group">
                      <label for="signup-confirm-password" class="form-label">
                          <i class="fas fa-lock mr-2 text-green-400"></i>Confirm Password
                      </label>
                      <div class="password-input-container">
                          <input type="password" id="signup-confirm-password" placeholder="Confirm your password" required class="form-input">
                          <button type="button" class="password-toggle" onclick="togglePassword('signup-confirm-password')">
                              <i class="fas fa-eye"></i>
                          </button>
                      </div>
                      <div class="input-focus-line"></div>
                  </div>

                  <div class="form-group">
                      <label class="flex items-start">
                          <input type="checkbox" id="terms-accept" required class="form-checkbox mt-1">
                          <span class="ml-2 text-gray-300 text-sm">
                              I agree to the 
                              <a href="#" class="text-blue-400 hover:text-blue-300">Terms of Service</a> 
                              and 
                              <a href="#" class="text-blue-400 hover:text-blue-300">Privacy Policy</a>
                          </span>
                      </label>
                  </div>

                  <div class="form-group">
                      <label class="flex items-start">
                          <input type="checkbox" id="newsletter-signup" class="form-checkbox mt-1">
                          <span class="ml-2 text-gray-300 text-sm">
                              Subscribe to our newsletter for exclusive offers and updates
                          </span>
                      </label>
                  </div>

                  <button type="submit" id="signup-btn" class="auth-submit-btn">
                      <span class="btn-text">Create Account</span>
                      <div class="btn-loader hidden">
                          <div class="spinner"></div>
                      </div>
                  </button>
              </form>

              <div class="auth-divider my-6">
                  <span class="divider-text">or sign up with</span>
              </div>

              <div class="social-auth-buttons space-y-3">
                  <button class="social-auth-btn google-btn">
                      <i class="fab fa-google mr-3"></i>
                      Continue with Google
                  </button>
                  <button class="social-auth-btn apple-btn">
                      <i class="fab fa-apple mr-3"></i>
                      Continue with Apple
                  </button>
              </div>

              <p class="text-center text-gray-400 text-sm mt-6">
                  Already have an account? 
                  <a href="#sign-in-main" class="form-link text-blue-400 hover:text-blue-300 transition-colors font-semibold">Sign In</a>
              </p>
          </div>
      </section>

      <section id="onboarding-main">
          <div class="info-title" id="onboarding-title"></div>
          <div class="auth-form-container">
              <div id="onboarding-error-message" class="error-message hidden"></div>
              <div>
                  <label for="onboarding-first-name">First Name:</label>
                  <input type="text" id="onboarding-first-name" placeholder="Your First Name" required>
              </div>
              <div>
                  <label for="onboarding-last-name">Last Name:</label>
                  <input type="text" id="onboarding-last-name" placeholder="Your Last Name" required>
              </div>
              <button id="onboarding-save-btn" class="shop-button">Save My Name</button>
          </div>
      </section>

      <section id="support-main">
          <div class="info-title" id="supportQuestion"></div>
          <button id="quickEasyBtn" class="support-option-button quick-easy-btn">Quick and Easy (AI)</button>
          <button id="advancedSupportBtn" class="support-option-button advanced-support-btn">Advanced Support (Mail)</button>
          <button id="backToMainSiteBtn" class="shop-button mt-10">Head to the Shop</button>
      </section>

      <section id="chat-interface">
          <div class="info-title">Chat with UltreBot!</div>
          <div id="chat-messages">
              
          </div>
          <div id="chat-input-container">
              <input type="text" id="chat-input" placeholder="Type your message...">
              <button id="send-chat-btn">Send</button>
          </div>
      </section>

      <section id="settings-main">
          <div class="info-title">Settings</div>
          <div class="w-full max-w-7xl mx-auto bg-gray-800 rounded-xl shadow-lg overflow-hidden flex flex-col lg:flex-row flex-grow">

              <div class="w-full lg:w-1/4 bg-gray-900 border-r border-gray-700 p-6 space-y-2 flex-shrink-0">
                  <h2 class="text-xl font-semibold text-white mb-4">Categories</h2>
                  <nav class="space-y-1">
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="general">General</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="accessibility">Accessibility</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="privacy">Privacy</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="visuals">Visuals</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="payment-method">Payment Method</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="notifications">Notifications</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="security">Security</a>
                      <a href="#" class="block px-4 py-2 text-gray-300 hover:bg-gray-700 hover:text-white rounded-md transition duration-200 ease-in-out font-medium settings-nav-link" data-setting-category="integrations">Integrations</a>
                  </nav>
              </div>

              <div class="w-full lg:w-3/4 p-6 flex flex-col flex-grow">
                  <h2 class="text-2xl font-bold text-white mb-6" id="settings-content-title">Select a Category</h2>
                  <div id="settings-content-area" class="space-y-6 flex-grow">
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-2">Welcome to your settings!</p>
                          <p>Please select a category from the left to view and adjust your preferences.</p>
                      </div>
                  </div>
              </div>
          </div>
      </section>

      <footer>
        &copy; 2025 Ultre. All rights reserved.
      </footer>

      <nav>
        <div id="nav-indicator"></div>
        <ul>
          <li data-page-id="home-main" class="main-nav-item"><a href="#home-main"><i class="fas fa-home"></i> Home</a></li>
          <li data-page-id="shop-page" class="main-nav-item"><a href="#shop-page"><i class="fas fa-store"></i> Shop</a></li>
          <li data-page-id="about-us-main" class="main-nav-item"><a href="#about-us-main"><i class="fas fa-info-circle"></i> About Us</a></li>
          <li data-page-id="cart-main" class="main-nav-item"><a href="#cart-main"><i class="fas fa-shopping-cart"></i> Cart</a></li>
          <li data-page-id="contact-main" class="main-nav-item"><a href="#contact-main"><i class="fas fa-envelope"></i> Contact</a></li>
          <li data-page-id="support-main" id="support-nav-item"><a href="#support-main"><i class="fas fa-life-ring"></i> Support</a></li>
          <li data-page-id="settings-main" class="main-nav-item"><a href="#settings-main"><i class="fas fa-cog"></i> Settings</a></li>
        </ul>
      </nav>
    </div>

    <div id="checkout-modal-overlay" class="modal-overlay">
      <div class="modal-content">
        <button class="modal-close-btn" id="modal-close-btn">&times;</button>
        <div class="modal-title">Checkout</div>
        <div class="modal-body">
          <p class="modal-total">Your Total: $<span id="modal-total-amount">0.00</span></p>
          
          <!-- Shipping Information -->
          <div class="shipping-info mb-6 text-left">
            <h4 class="text-lg font-semibold mb-3 text-white">Shipping Information</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <input type="text" id="shipping-address" placeholder="Street Address" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
              <input type="text" id="shipping-city" placeholder="City" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
              <input type="text" id="shipping-state" placeholder="State/Province" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
              <input type="text" id="shipping-zip" placeholder="ZIP/Postal Code" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
            </div>
          </div>

          <div class="payment-methods text-left">
            <p class="text-lg font-semibold mb-3 text-white">Select Payment Method:</p>
            <label>
              <input type="radio" name="payment-method" value="credit-card" checked>
              <i class="fas fa-credit-card"></i> Credit Card (Simulated)
            </label>
            <label>
              <input type="radio" name="payment-method" value="paypal">
              <i class="fab fa-paypal"></i> PayPal (Simulated)
            </label>
            <label>
              <input type="radio" name="payment-method" value="apple-pay">
              <i class="fab fa-apple-pay"></i> Apple Pay (Simulated)
            </label>
            <label>
              <input type="radio" name="payment-method" value="google-pay">
              <i class="fab fa-google-pay"></i> Google Pay (Simulated)
            </label>
          </div>
          
          <button class="place-order-btn" id="place-order-btn">Place Order</button>
          <p id="order-confirmation-message" class="text-green-400 text-lg mt-4 hidden">Thank You for your order!</p>
          
          <!-- Order Tracking -->
          <div id="order-tracking" class="mt-6 hidden">
            <h4 class="text-lg font-semibold mb-3 text-white">Order Status</h4>
            <div class="tracking-timeline">
              <div class="tracking-step completed">
                <div class="tracking-dot"></div>
                <span class="tracking-label">Order Placed</span>
              </div>
              <div class="tracking-step active">
                <div class="tracking-dot"></div>
                <span class="tracking-label">Processing</span>
              </div>
              <div class="tracking-step">
                <div class="tracking-dot"></div>
                <span class="tracking-label">Shipped</span>
              </div>
              <div class="tracking-step">
                <div class="tracking-dot"></div>
                <span class="tracking-label">Delivered</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Size Chart Modal -->
    <div id="size-chart-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="size-chart-close-btn">&times;</button>
        <div class="modal-title">Size Chart</div>
        <div class="size-chart-content text-left">
          <div class="size-chart-table overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-gray-600">
                  <th class="p-3 text-left text-white">Size</th>
                  <th class="p-3 text-center text-white">Chest (in)</th>
                  <th class="p-3 text-center text-white">Waist (in)</th>
                  <th class="p-3 text-center text-white">Hips (in)</th>
                  <th class="p-3 text-center text-white">Length (in)</th>
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white">XS</td>
                  <td class="p-3 text-center text-gray-300">32-34</td>
                  <td class="p-3 text-center text-gray-300">26-28</td>
                  <td class="p-3 text-center text-gray-300">34-36</td>
                  <td class="p-3 text-center text-gray-300">26</td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white">S</td>
                  <td class="p-3 text-center text-gray-300">34-36</td>
                  <td class="p-3 text-center text-gray-300">28-30</td>
                  <td class="p-3 text-center text-gray-300">36-38</td>
                  <td class="p-3 text-center text-gray-300">27</td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white">M</td>
                  <td class="p-3 text-center text-gray-300">36-38</td>
                  <td class="p-3 text-center text-gray-300">30-32</td>
                  <td class="p-3 text-center text-gray-300">38-40</td>
                  <td class="p-3 text-center text-gray-300">28</td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white">L</td>
                  <td class="p-3 text-center text-gray-300">38-40</td>
                  <td class="p-3 text-center text-gray-300">32-34</td>
                  <td class="p-3 text-center text-gray-300">40-42</td>
                  <td class="p-3 text-center text-gray-300">29</td>
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white">XL</td>
                  <td class="p-3 text-center text-gray-300">40-42</td>
                  <td class="p-3 text-center text-gray-300">34-36</td>
                  <td class="p-3 text-center text-gray-300">42-44</td>
                  <td class="p-3 text-center text-gray-300">30</td>
                </tr>
                <tr>
                  <td class="p-3 text-white">XXL</td>
                  <td class="p-3 text-center text-gray-300">42-44</td>
                  <td class="p-3 text-center text-gray-300">36-38</td>
                  <td class="p-3 text-center text-gray-300">44-46</td>
                  <td class="p-3 text-center text-gray-300">31</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="size-tips mt-6 p-4 bg-gray-700 rounded-lg">
            <h4 class="font-semibold text-white mb-2">Size Tips:</h4>
            <ul class="text-gray-300 text-sm space-y-1">
              <li>â€¢ Measure around the fullest part of your chest</li>
              <li>â€¢ For tops, measure around your natural waistline</li>
              <li>â€¢ Our items are designed with a modern, comfortable fit</li>
              <li>â€¢ If between sizes, we recommend sizing up</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Wishlist Modal -->
    <div id="wishlist-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="wishlist-close-btn">&times;</button>
        <div class="modal-title">My Wishlist</div>
        <div id="wishlist-content" class="wishlist-items">
          <!-- Wishlist items will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Product Comparison Modal -->
    <div id="product-comparison-modal" class="modal-overlay">
      <div class="modal-content max-w-6xl">
        <button class="modal-close-btn" id="comparison-close-btn">&times;</button>
        <div class="modal-title">Product Comparison</div>
        <div id="comparison-content" class="comparison-table-container">
          <!-- Comparison table will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Advanced Search Modal -->
    <div id="advanced-search-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="advanced-search-close-btn">&times;</button>
        <div class="modal-title">Advanced Search</div>
        <div class="advanced-search-content">
          <div class="search-filters-grid grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="filter-group">
              <label class="filter-label">Price Range</label>
              <div class="price-range-slider">
                <input type="range" id="min-price" min="0" max="200" value="0" class="range-slider">
                <input type="range" id="max-price" min="0" max="200" value="200" class="range-slider">
                <div class="price-display">
                  $<span id="min-price-display">0</span> - $<span id="max-price-display">200</span>
                </div>
              </div>
            </div>
            
            <div class="filter-group">
              <label class="filter-label">Brand/Collection</label>
              <select id="brand-filter" class="filter-select">
                <option value="">All Collections</option>
                <option value="essentials">Essentials</option>
                <option value="premium">Premium</option>
                <option value="limited">Limited Edition</option>
              </select>
            </div>
            
            <div class="filter-group">
              <label class="filter-label">Material</label>
              <div class="checkbox-group">
                <label class="checkbox-item">
                  <input type="checkbox" value="cotton" class="material-checkbox">
                  <span>Cotton</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="polyester" class="material-checkbox">
                  <span>Polyester</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="wool" class="material-checkbox">
                  <span>Wool</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="denim" class="material-checkbox">
                  <span>Denim</span>
                </label>
              </div>
            </div>
            
            <div class="filter-group">
              <label class="filter-label">Style</label>
              <div class="checkbox-group">
                <label class="checkbox-item">
                  <input type="checkbox" value="casual" class="style-checkbox">
                  <span>Casual</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="formal" class="style-checkbox">
                  <span>Formal</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="streetwear" class="style-checkbox">
                  <span>Streetwear</span>
                </label>
                <label class="checkbox-item">
                  <input type="checkbox" value="athletic" class="style-checkbox">
                  <span>Athletic</span>
                </label>
              </div>
            </div>
          </div>
          
          <div class="search-actions mt-6">
            <button id="apply-advanced-filters" class="shop-button">Apply Filters</button>
            <button id="clear-advanced-filters" class="px-6 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-500 transition-colors">Clear All</button>
          </div>
        </div>
      </div>
    </div>

    <!-- User Dashboard Modal -->
    <div id="user-dashboard-modal" class="modal-overlay">
      <div class="modal-content max-w-5xl">
        <button class="modal-close-btn" id="dashboard-close-btn">&times;</button>
        <div class="modal-title">My Dashboard</div>
        <div class="dashboard-content">
          <div class="dashboard-tabs flex border-b border-gray-600 mb-6">
            <button class="dashboard-tab active" data-tab="overview">Overview</button>
            <button class="dashboard-tab" data-tab="orders">Orders</button>
            <button class="dashboard-tab" data-tab="wishlist">Wishlist</button>
            <button class="dashboard-tab" data-tab="preferences">Preferences</button>
          </div>
          
          <div id="dashboard-overview" class="dashboard-tab-content active">
            <div class="dashboard-stats grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
              <div class="stat-card bg-gray-800 p-6 rounded-xl text-center">
                <div class="stat-icon text-3xl text-blue-400 mb-2">ðŸ“¦</div>
                <div class="stat-number text-2xl font-bold text-white">0</div>
                <div class="stat-label text-gray-400">Orders</div>
              </div>
              <div class="stat-card bg-gray-800 p-6 rounded-xl text-center">
                <div class="stat-icon text-3xl text-red-400 mb-2">â¤ï¸</div>
                <div class="stat-number text-2xl font-bold text-white">0</div>
                <div class="stat-label text-gray-400">Wishlist Items</div>
              </div>
              <div class="stat-card bg-gray-800 p-6 rounded-xl text-center">
                <div class="stat-icon text-3xl text-green-400 mb-2">â­</div>
                <div class="stat-number text-2xl font-bold text-white">0</div>
                <div class="stat-label text-gray-400">Reviews</div>
              </div>
            </div>
            
            <div class="recent-activity bg-gray-800 p-6 rounded-xl">
              <h3 class="text-xl font-bold text-white mb-4">Recent Activity</h3>
              <div class="activity-list space-y-3">
                <div class="activity-item text-gray-300 text-sm">
                  Welcome to Ultre! Start exploring our collection.
                </div>
              </div>
            </div>
          </div>
          
          <div id="dashboard-orders" class="dashboard-tab-content hidden">
            <div class="orders-list space-y-4">
              <div class="text-center text-gray-400 py-8">
                <div class="text-6xl mb-4">ðŸ“¦</div>
                <p>No orders yet</p>
                <p class="text-sm">Start shopping to see your order history here</p>
              </div>
            </div>
          </div>
          
          <div id="dashboard-wishlist" class="dashboard-tab-content hidden">
            <div id="dashboard-wishlist-items" class="wishlist-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
              <!-- Wishlist items will be populated dynamically -->
            </div>
          </div>
          
          <div id="dashboard-preferences" class="dashboard-tab-content hidden">
            <div class="preferences-form space-y-6">
              <div class="preference-group">
                <label class="preference-label">Email Notifications</label>
                <div class="toggle-group space-y-3">
                  <label class="toggle-item">
                    <input type="checkbox" id="email-orders" checked>
                    <span>Order updates</span>
                  </label>
                  <label class="toggle-item">
                    <input type="checkbox" id="email-promotions">
                    <span>Promotions & deals</span>
                  </label>
                  <label class="toggle-item">
                    <input type="checkbox" id="email-newsletter" checked>
                    <span>Newsletter</span>
                  </label>
                </div>
              </div>
              
              <div class="preference-group">
                <label class="preference-label">Shopping Preferences</label>
                <div class="toggle-group space-y-3">
                  <label class="toggle-item">
                    <input type="checkbox" id="save-payment">
                    <span>Save payment methods</span>
                  </label>
                  <label class="toggle-item">
                    <input type="checkbox" id="quick-checkout" checked>
                    <span>Quick checkout</span>
                  </label>
                </div>
              </div>
              
              <button id="save-preferences" class="shop-button">Save Preferences</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Size Recommendation Tool Modal -->
    <div id="size-recommendation-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="size-recommendation-close-btn">&times;</button>
        <div class="modal-title">Size Recommendation Tool</div>
        <div class="size-recommendation-content">
          <div class="measurement-form space-y-6">
            <div class="form-group">
              <label class="form-label">Height</label>
              <div class="measurement-input-group">
                <input type="number" id="height-feet" placeholder="5" min="4" max="7" class="measurement-input">
                <span class="measurement-unit">ft</span>
                <input type="number" id="height-inches" placeholder="10" min="0" max="11" class="measurement-input">
                <span class="measurement-unit">in</span>
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Weight</label>
              <div class="measurement-input-group">
                <input type="number" id="weight" placeholder="150" min="80" max="300" class="measurement-input">
                <span class="measurement-unit">lbs</span>
              </div>
            </div>
            
            <div class="form-group">
              <label class="form-label">Body Type</label>
              <select id="body-type" class="form-select">
                <option value="">Select body type</option>
                <option value="slim">Slim</option>
                <option value="athletic">Athletic</option>
                <option value="regular">Regular</option>
                <option value="plus">Plus Size</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">Preferred Fit</label>
              <div class="fit-options grid grid-cols-3 gap-3">
                <label class="fit-option">
                  <input type="radio" name="preferred-fit" value="slim" class="fit-radio">
                  <span class="fit-label">Slim</span>
                </label>
                <label class="fit-option">
                  <input type="radio" name="preferred-fit" value="regular" checked class="fit-radio">
                  <span class="fit-label">Regular</span>
                </label>
                <label class="fit-option">
                  <input type="radio" name="preferred-fit" value="loose" class="fit-radio">
                  <span class="fit-label">Loose</span>
                </label>
              </div>
            </div>
            
            <button id="get-size-recommendation" class="shop-button w-full">Get Size Recommendation</button>
          </div>
          
          <div id="size-recommendation-result" class="recommendation-result hidden mt-6 p-6 bg-gray-800 rounded-xl">
            <!-- Size recommendation will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Blog System Modal -->
    <div id="blog-modal" class="modal-overlay">
      <div class="modal-content max-w-5xl">
        <button class="modal-close-btn" id="blog-close-btn">&times;</button>
        <div class="modal-title">Ultre Blog</div>
        <div class="blog-content">
          <div class="blog-categories mb-6">
            <button class="blog-category-btn active" data-category="all">All Posts</button>
            <button class="blog-category-btn" data-category="style">Style Tips</button>
            <button class="blog-category-btn" data-category="sustainability">Sustainability</button>
            <button class="blog-category-btn" data-category="behind-scenes">Behind the Scenes</button>
          </div>
          
          <div id="blog-posts-container" class="blog-posts-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Blog posts will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>

    <!-- Blog Post Detail Modal -->
    <div id="blog-post-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="blog-post-close-btn">&times;</button>
        <div id="blog-post-content" class="blog-post-detail">
          <!-- Blog post content will be populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Newsletter Signup Enhanced Modal -->
    <div id="newsletter-modal" class="modal-overlay">
      <div class="modal-content max-w-2xl">
        <button class="modal-close-btn" id="newsletter-close-btn">&times;</button>
        <div class="newsletter-content text-center">
          <div class="newsletter-icon text-6xl mb-4">ðŸ“§</div>
          <h3 class="text-2xl font-bold text-white mb-4">Stay in the Loop!</h3>
          <p class="text-gray-300 mb-6">Get exclusive access to new collections, style tips, and special offers before anyone else.</p>
          
          <div class="newsletter-form space-y-4">
            <div class="form-group">
              <input type="text" id="newsletter-first-name" placeholder="First Name" class="form-input">
              <div class="input-focus-line"></div>
            </div>
            
            <div class="form-group">
              <input type="email" id="newsletter-email" placeholder="Email Address" class="form-input">
              <div class="input-focus-line"></div>
            </div>
            
            <div class="newsletter-preferences">
              <label class="newsletter-checkbox">
                <input type="checkbox" id="newsletter-style-tips" checked>
                <span>Style tips and fashion advice</span>
              </label>
              <label class="newsletter-checkbox">
                <input type="checkbox" id="newsletter-new-collections" checked>
                <span>New collection announcements</span>
              </label>
              <label class="newsletter-checkbox">
                <input type="checkbox" id="newsletter-exclusive-offers">
                <span>Exclusive offers and discounts</span>
              </label>
            </div>
            
            <button id="newsletter-submit" class="shop-button w-full">Subscribe to Newsletter</button>
          </div>
          
          <p class="text-xs text-gray-500 mt-4">By subscribing, you agree to our privacy policy. Unsubscribe at any time.</p>
        </div>
      </div>
    </div>

    <!-- Social Media Integration Modal -->
    <div id="social-modal" class="modal-overlay">
      <div class="modal-content max-w-4xl">
        <button class="modal-close-btn" id="social-close-btn">&times;</button>
        <div class="modal-title">Follow Us on Social Media</div>
        <div class="social-content">
          <div class="social-platforms grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="social-platform bg-gradient-to-br from-pink-500 to-purple-600 p-6 rounded-xl text-center">
              <div class="social-icon text-4xl mb-3">ðŸ“¸</div>
              <h4 class="text-xl font-bold text-white mb-2">Instagram</h4>
              <p class="text-pink-100 mb-4">Follow for daily style inspiration and behind-the-scenes content</p>
              <button class="social-follow-btn bg-white text-pink-600 px-6 py-2 rounded-lg font-semibold hover:bg-pink-50 transition-colors">
                Follow @ultre
              </button>
            </div>
            
            <div class="social-platform bg-gradient-to-br from-blue-500 to-blue-600 p-6 rounded-xl text-center">
              <div class="social-icon text-4xl mb-3">ðŸ¦</div>
              <h4 class="text-xl font-bold text-white mb-2">Twitter</h4>
              <p class="text-blue-100 mb-4">Stay updated with the latest news and community discussions</p>
              <button class="social-follow-btn bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:bg-blue-50 transition-colors">
                Follow @ultre
              </button>
            </div>
            
            <div class="social-platform bg-gradient-to-br from-red-500 to-red-600 p-6 rounded-xl text-center">
              <div class="social-icon text-4xl mb-3">ðŸ“º</div>
              <h4 class="text-xl font-bold text-white mb-2">YouTube</h4>
              <p class="text-red-100 mb-4">Watch styling tutorials and fashion vlogs</p>
              <button class="social-follow-btn bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-red-50 transition-colors">
                Subscribe
              </button>
            </div>
            
            <div class="social-platform bg-gradient-to-br from-green-500 to-green-600 p-6 rounded-xl text-center">
              <div class="social-icon text-4xl mb-3">ðŸ’¬</div>
              <h4 class="text-xl font-bold text-white mb-2">Discord</h4>
              <p class="text-green-100 mb-4">Join our community for style discussions and exclusive events</p>
              <button class="social-follow-btn bg-white text-green-600 px-6 py-2 rounded-lg font-semibold hover:bg-green-50 transition-colors">
                Join Server
              </button>
            </div>
          </div>
          
          <div class="social-feed mt-8">
            <h4 class="text-xl font-bold text-white mb-4">Recent Social Posts</h4>
            <div id="social-feed-container" class="social-feed-grid grid grid-cols-1 md:grid-cols-3 gap-4">
              <!-- Social feed will be populated dynamically -->
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const PRINTIFY_API_KEY = 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIzN2Q0YmQzMDM1ZmUxMWU5YTgwM2FiN2VlYjNjY2M5NyIsImp0aSI6IjYxODFiN2NiNWY3NmZjMmU1ZmEzMDBiNjU5NTRlOTYyN2UzMTk5NTJjMWFkZGIwMGQ0N2UwMzFiOTdkMTk2YzM2NTcyMWJlYTE1YzE1OGQ4IiwiaWF0IjoxNzUyNDk3MzQ3LjUzOTAzMywibmJmIjoxNzUyNDk3MzQ3LjUzOTM1MiwiZXhwIjoxNzg0MDMzMzQ3LjUyOTg1Niwic3ViIjoiMjM2MjgyMzEiLCJzY29wZXMianMiOiJzaG9wcy5tYW5hZ2UiLCJzaG9wcy5yZWFkIiwib3JkZXJzLnJlYWQiLCJvcmRlcnMud3JpdGUiLCJwcm9kdWN0cy5yZWFkIiwicHJvZHVjdHMud3JpdGUiLCJ3ZWJoY29va3MucmVhZCIsIndlYmhvb2tzLndyaXRlIiwidXBsb2Fkcy5yZWFkIiwidXBsb2Fkcy53cml0ZSIsInByaW50X3Byb3ZpZGVycy5yZWFkIiwidXNlci5pbmZvIl19.uEApTE90qYMKYPMpu8B6Uo44ZdVFtQSOnWeDs3SGKXjkR-F9pqNmPGa8u7j-jb__skJLleadd9ZsV-ebb8Tw4hGeBO3TKU0F0yJT0L8swLAcGITpcd2tQHK9ypQ0J1uUKQIoaBFDixJPdpOKf5hjU8e98DbOlyxIVMO0TfmCD4wGmVRMpqtb7RKhtjV_an3f5A0Xx8mRBJQPEWqC9T0FsTZKQfJzFQA2JG_TNpkkxiVJuYOlNtrVNbR0U7pe4wGqpE8OAf9_y5CXrL3jamre6LVwpbIlwwfIcXGjzQ2S2E5YvB-UOLNq8NejM-cZoB7r7JElQt3c4MRuJWrjiqs1Q6WP1YLbllswaVbB8QWv_kbc22oVutRhtUWyu1IiDlhF3vWtKpZeaHJfIH8h0Jpq9nDuE-fp3hHJhSRFBV8urGHaP8zv08c3Qu9F2pSVHJInJs7zwgPru3syz3eSkDjn1FqyQu1YsXzwq10W5kjVBgEWRgihT-k2GkjCv0uMVTLF2zQfavqhD3b-8GUhIv9-L2n';
      const PRINTIFY_API_BASE_URL = 'https://api.printify.com/v1';

      const DEEPSEEK_API_KEY = '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';
      const DEEPSEEK_API_URL = 'https://api.deepseek.com/v1/chat/completions';


      const introSection = document.getElementById('intro-section');
      const mainWebsiteContentWrapper = document.getElementById('main-website-content-wrapper');
      const shopButton = document.getElementById('shopButton');
      const transitionOverlay = document.getElementById('transitionOverlay');

      const loadingIndicator = document.getElementById('loading-indicator');
      const noStockMessage = document.getElementById('no-stock-message');
      const statusMessageElement = document.getElementById('status-message');
      const itemsGrid = document.getElementById('items-grid');

      const emptyCartMessage = document.getElementById('empty-cart-message');
      const cartItemsList = document.getElementById('cart-items-list');
      const cartTotalElement = document.getElementById('cart-total');
      const totalAmountElement = document.getElementById('total-amount');
      const checkoutButton = document.getElementById('checkout-btn');

      const checkoutModalOverlay = document.getElementById('checkout-modal-overlay');
      const modalCloseBtn = document.getElementById('modal-close-btn');
      const modalTotalAmount = document.getElementById('modal-total-amount');
      const placeOrderBtn = document.getElementById('place-order-btn');
      const orderConfirmationMessage = document.getElementById('order-confirmation-message');

      const itemDetailPage = document.getElementById('item-detail-page');
      const detailItemImage = document.getElementById('detail-item-image');
      const detailItemName = document.getElementById('detail-item-name');
      const detailItemPrice = document.getElementById('detail-item-price');
      const detailItemDescription = document.getElementById('detail-item-description');
      const detailAddToCartBtn = document.getElementById('detail-add-to-cart-btn');
      const backToShopBtn = document.getElementById('back-to-shop-btn');
      const itemSizeSelect = document.getElementById('item-size');

      const navIndicator = document.getElementById('nav-indicator');
      const navLinks = document.querySelectorAll('nav ul li');
      const mainNavItems = document.querySelectorAll('nav ul li.main-nav-item');
      const supportNavItem = document.getElementById('support-nav-item');

      const messageBox = document.getElementById('message-box');
      const messageText = document.getElementById('message-text');

      const signInPage = document.getElementById('sign-in-main');
      const signUpPage = document.getElementById('sign-up-main');
      const signInEmailInput = document.getElementById('signin-email');
      const signInPasswordInput = document.getElementById('signin-password');
      const signInBtn = document.getElementById('signin-btn');
      const signInErrorMessage = document.getElementById('signin-error-message');
      const signUpEmailInput = document.getElementById('signup-email');
      const signUpPasswordInput = document.getElementById('signup-password');
      const signUpConfirmPasswordInput = document.getElementById('signup-confirm-password');
      const signUpBtn = document.getElementById('signup-btn');
      const signUpErrorMessage = document.getElementById('signup-error-message');

      const onboardingPage = document.getElementById('onboarding-main');
      const onboardingTitle = document.getElementById('onboarding-title');
      const onboardingFirstNameInput = document.getElementById('onboarding-first-name');
      const onboardingLastNameInput = document.getElementById('onboarding-last-name');
      const onboardingSaveBtn = document.getElementById('onboarding-save-btn');
      const onboardingErrorMessage = document.getElementById('onboarding-error-message');

      const supportMain = document.getElementById('support-main');
      const supportQuestion = document.getElementById('supportQuestion');
      const quickEasyBtn = document.getElementById('quickEasyBtn');
      const advancedSupportBtn = document.getElementById('advancedSupportBtn');
      const backToMainSiteBtn = document.getElementById('backToMainSiteBtn');

      const chatInterface = document.getElementById('chat-interface');
      const chatMessages = document.getElementById('chat-messages');
      const chatInput = document.getElementById('chat-input');
      const sendChatBtn = document.getElementById('send-chat-btn');
      let isBotTyping = false;
      let chatHistory = [{ role: "system", content: "You are UltreBot, a helpful assistant for the Ultre clothing brand. You answer questions about products, orders, and general inquiries. Keep responses concise and friendly." }];

      const settingsMain = document.getElementById('settings-main');
      const settingsContentTitle = document.getElementById('settings-content-title');
      const settingsContentArea = document.getElementById('settings-content-area');
      const settingsNavLinks = document.querySelectorAll('.settings-nav-link');

      const hamburgerIcon = document.getElementById('hamburgerIcon');
      const mobileNavOverlay = document.getElementById('mobile-nav-overlay');
      const mobileNavCloseBtn = document.getElementById('mobileNavCloseBtn');
      const mobileNavItems = document.querySelectorAll('#mobile-nav-overlay .mobile-nav-item');


      let cart = {};
      let currentActiveNavLinkLi = null;
      let isNavigating = false;
      let supportMode = false;

      // Enhanced product data with categories and multiple images
      const localClothingItems = [
        { 
          id: 'tee', 
          name: "Minimalist Tee", 
          price: 35.00, 
          category: 'tops',
          brand: 'essentials',
          material: 'cotton',
          style: 'casual',
          imageUrl: "https://placehold.co/300x300/333333/FFFFFF?text=Tee", 
          images: [
            "https://placehold.co/300x300/333333/FFFFFF?text=Tee+1",
            "https://placehold.co/300x300/333333/FFFFFF?text=Tee+2",
            "https://placehold.co/300x300/333333/FFFFFF?text=Tee+3"
          ],
          description: "Our classic minimalist tee, designed for comfort and style. Made from 100% organic cotton, it's perfect for everyday wear. Available in various sizes.",
          sizes: ['XS', 'S', 'M', 'L', 'XL', 'XXL'],
          colors: ['Black', 'White', 'Navy', 'Gray'],
          features: ['100% Organic Cotton', 'Breathable', 'Easy Care', 'Sustainable'],
          care: ['Machine wash cold', 'Tumble dry low', 'Iron if needed'],
          reviews: [
            { rating: 5, comment: "Perfect fit and amazing quality!", author: "Mike S.", date: "2025-01-15" },
            { rating: 5, comment: "Love the minimalist design", author: "Sarah L.", date: "2025-01-10" }
          ],
          inStock: true,
          stockCount: 45,
          tags: ['minimalist', 'comfortable', 'versatile', 'sustainable']
        },
        { 
          id: 'hoodie', 
          name: "Essential Hoodie", 
          price: 65.00, 
          category: 'outerwear',
          brand: 'essentials',
          material: 'polyester',
          style: 'casual',
          imageUrl: "https://placehold.co/300x300/555555/FFFFFF?text=Hoodie", 
          images: [
            "https://placehold.co/300x300/555555/FFFFFF?text=Hoodie+1",
            "https://placehold.co/300x300/555555/FFFFFF?text=Hoodie+2"
          ],
          description: "Stay warm and stylish with our essential hoodie. Crafted from a soft fleece blend, featuring a subtle Ultre logo. Ideal for cooler days.",
          sizes: ['S', 'M', 'L', 'XL', 'XXL'],
          colors: ['Black', 'Gray', 'Navy'],
          features: ['Soft Fleece Blend', 'Kangaroo Pocket', 'Adjustable Hood', 'Ribbed Cuffs'],
          care: ['Machine wash cold', 'Tumble dry low', 'Do not bleach'],
          reviews: [
            { rating: 5, comment: "So comfortable and warm!", author: "Alex K.", date: "2025-01-12" },
            { rating: 4, comment: "Great quality, perfect for winter", author: "Jordan M.", date: "2025-01-08" }
          ],
          inStock: true,
          stockCount: 28,
          tags: ['warm', 'comfortable', 'stylish', 'winter']
        },
        { 
          id: 'joggers', 
          name: "Core Joggers", 
          price: 50.00, 
          category: 'bottoms',
          brand: 'essentials',
          material: 'cotton',
          style: 'athletic',
          imageUrl: "https://placehold.co/300x300/777777/FFFFFF?text=Joggers", 
          images: [
            "https://placehold.co/300x300/777777/FFFFFF?text=Joggers+1",
            "https://placehold.co/300x300/777777/FFFFFF?text=Joggers+2"
          ],
          description: "Comfortable and versatile core joggers, perfect for lounging or light activity. Designed with a modern tapered fit and elastic waistband.",
          sizes: ['XS', 'S', 'M', 'L', 'XL'],
          colors: ['Black', 'Gray', 'Navy'],
          features: ['Tapered Fit', 'Elastic Waistband', 'Side Pockets', 'Ribbed Cuffs'],
          care: ['Machine wash cold', 'Tumble dry low', 'Iron if needed'],
          reviews: [
            { rating: 5, comment: "Best joggers I've ever owned!", author: "Chris R.", date: "2025-01-14" },
            { rating: 5, comment: "Perfect fit and super comfortable", author: "Emma T.", date: "2025-01-11" }
          ],
          inStock: true,
          stockCount: 32,
          tags: ['comfortable', 'versatile', 'modern', 'athletic']
        },
        { 
          id: 'cap', 
          name: "Urban Cap", 
          price: 25.00, 
          category: 'accessories',
          brand: 'essentials',
          material: 'cotton',
          style: 'streetwear',
          imageUrl: "https://placehold.co/300x300/999999/FFFFFF?text=Cap", 
          images: [
            "https://placehold.co/300x300/999999/FFFFFF?text=Cap+1"
          ],
          description: "Complete your look with our urban cap. A classic design with an adjustable strap for the perfect fit. Features a discreet embroidered detail.",
          sizes: ['One Size'],
          colors: ['Black', 'Navy', 'Gray'],
          features: ['Adjustable Strap', 'Embroidered Detail', 'Classic Design', 'Perfect Fit'],
          care: ['Hand wash cold', 'Air dry', 'Do not bleach'],
          reviews: [
            { rating: 4, comment: "Great cap, fits perfectly", author: "David L.", date: "2025-01-09" }
          ],
          inStock: true,
          stockCount: 15,
          tags: ['classic', 'adjustable', 'stylish', 'urban']
        },
        { 
          id: 'premium-shirt', 
          name: "Premium Oxford Shirt", 
          price: 85.00, 
          category: 'tops',
          brand: 'premium',
          material: 'cotton',
          style: 'formal',
          imageUrl: "https://placehold.co/300x300/666666/FFFFFF?text=Shirt", 
          images: [
            "https://placehold.co/300x300/666666/FFFFFF?text=Shirt+1",
            "https://placehold.co/300x300/666666/FFFFFF?text=Shirt+2"
          ],
          description: "Elevate your style with our premium Oxford shirt. Crafted from the finest cotton with a modern slim fit, perfect for both casual and formal occasions.",
          sizes: ['S', 'M', 'L', 'XL'],
          colors: ['White', 'Light Blue', 'Pink'],
          features: ['Premium Cotton', 'Modern Slim Fit', 'Button-down Collar', 'Chest Pocket'],
          care: ['Machine wash cold', 'Tumble dry low', 'Iron on medium'],
          reviews: [
            { rating: 5, comment: "Exceptional quality and fit!", author: "Michael B.", date: "2025-01-16" }
          ],
          inStock: true,
          stockCount: 18,
          tags: ['premium', 'formal', 'quality', 'versatile']
        }
      ];

      // Wishlist functionality
      let wishlist = JSON.parse(localStorage.getItem('wishlist')) || [];
      let currentQuantity = 1;
      let selectedShipping = 'standard';
      let appliedPromo = null;

      // Promo codes
      const promoCodes = {
        'WELCOME10': { discount: 0.10, description: '10% off your first order' },
        'SAVE20': { discount: 0.20, description: '20% off orders over $100' },
        'FREESHIP': { discount: 0, description: 'Free shipping on your order' }
      };

      // Search and filter functionality
      function filterProducts() {
        const searchTerm = document.getElementById('product-search').value.toLowerCase();
        const categoryFilter = document.getElementById('category-filter').value;
        const priceFilter = document.getElementById('price-filter').value;
        const sizeFilter = document.getElementById('size-filter').value;

        let filteredProducts = localClothingItems.filter(item => {
          const matchesSearch = item.name.toLowerCase().includes(searchTerm) || 
                               item.description.toLowerCase().includes(searchTerm);
          const matchesCategory = !categoryFilter || item.category === categoryFilter;
          const matchesPrice = !priceFilter || checkPriceRange(item.price, priceFilter);
          const matchesSize = !sizeFilter || item.sizes.includes(sizeFilter);

          return matchesSearch && matchesCategory && matchesPrice && matchesSize;
        });

        renderFilteredProducts(filteredProducts);
        updateResultsSummary(filteredProducts.length);
      }

      function checkPriceRange(price, range) {
        switch(range) {
          case '0-25': return price <= 25;
          case '25-50': return price > 25 && price <= 50;
          case '50-100': return price > 50 && price <= 100;
          case '100+': return price > 100;
          default: return true;
        }
      }

      function renderFilteredProducts(products) {
        itemsGrid.innerHTML = '';
        
        if (products.length === 0) {
          itemsGrid.innerHTML = `
            <div class="col-span-full text-center py-12">
              <span class="text-6xl mb-4 block">ðŸ”</span>
              <p class="text-xl text-gray-300 mb-2">No products found</p>
              <p class="text-gray-500">Try adjusting your search or filters</p>
            </div>
          `;
          return;
        }

        products.forEach((item, index) => {
          const isInWishlist = wishlist.some(w => w.id === item.id);
          const itemCard = document.createElement('div');
          itemCard.className = 'bg-gray-800 rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 flex flex-col cursor-pointer product-card';
          itemCard.style.animationDelay = `${0.1 * index}s`;
          itemCard.dataset.itemId = item.id;
          itemCard.dataset.itemName = item.name;
          itemCard.dataset.itemPrice = item.price;
          itemCard.dataset.itemImage = item.imageUrl;
          itemCard.dataset.itemDescription = item.description;

          itemCard.innerHTML = `
            <div class="relative">
              <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-48 object-cover">
              <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" data-item-id="${item.id}">
                <i class="fas fa-heart"></i>
              </button>
            </div>
            <div class="p-4 flex flex-col justify-between flex-grow">
              <h3 class="text-xl font-semibold text-white mb-2">${item.name}</h3>
              <p class="text-gray-300 text-sm mb-2">${item.category}</p>
              <p class="text-gray-300 text-lg mb-4">$${item.price.toFixed(2)}</p>
              <button class="add-to-cart-btn mt-auto bg-white text-gray-900 font-bold py-2 px-4 rounded-md hover:bg-gray-200 transition-colors" data-item-id="${item.id}" data-item-name="${item.name}" data-item-price="${item.price}" data-item-image="${item.imageUrl}">Add to Cart</button>
            </div>
          `;
          itemsGrid.appendChild(itemCard);
        });

        // Add event listeners
        addProductEventListeners();
      }

      function addProductEventListeners() {
        document.querySelectorAll('.add-to-cart-btn').forEach(button => {
          button.addEventListener('click', (event) => {
            event.stopPropagation();
            const itemId = event.target.dataset.itemId;
            const itemName = event.target.dataset.itemName;
            const itemPrice = parseFloat(event.target.dataset.itemPrice);
            const itemImage = event.target.dataset.itemImage;
            addToCart({ id: itemId, name: itemName, price: itemPrice, imageUrl: itemImage, size: 'M' });
            showMessageBox(`${itemName} (Size: M) has successfully been added to cart!`);
          });
        });

        document.querySelectorAll('.wishlist-btn').forEach(button => {
          button.addEventListener('click', (event) => {
            event.stopPropagation();
            const itemId = event.target.dataset.itemId;
            toggleWishlist(itemId);
          });
        });

        document.querySelectorAll('.product-card').forEach(card => {
          card.addEventListener('click', (event) => {
            if (!event.target.classList.contains('add-to-cart-btn') && !event.target.classList.contains('wishlist-btn')) {
              const itemId = card.dataset.itemId;
              const itemName = card.dataset.itemName;
              const itemPrice = parseFloat(card.dataset.itemPrice);
              const itemImage = card.dataset.itemImage;
              const itemDescription = card.dataset.itemDescription;
              showItemDetail({ id: itemId, name: itemName, price: itemPrice, imageUrl: itemImage, description: itemDescription });
            }
          });
        });
      }

      function toggleWishlist(itemId) {
        const item = localClothingItems.find(i => i.id === itemId);
        const existingIndex = wishlist.findIndex(w => w.id === itemId);
        
        if (existingIndex >= 0) {
          wishlist.splice(existingIndex, 1);
          showMessageBox('Removed from wishlist');
        } else {
          wishlist.push(item);
          showMessageBox('Added to wishlist');
        }
        
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        updateWishlistCount();
        renderFilteredProducts(localClothingItems); // Refresh to update wishlist buttons
      }

      function updateWishlistCount() {
        const wishlistCountElement = document.getElementById('wishlist-count');
        if (wishlistCountElement) {
          wishlistCountElement.textContent = wishlist.length;
        }
      }

      function updateResultsSummary(count) {
        const resultsSummary = document.getElementById('results-summary');
        const resultsCount = document.getElementById('results-count');
        
        if (count > 0) {
          resultsSummary.classList.remove('hidden');
          resultsCount.textContent = count;
        } else {
          resultsSummary.classList.add('hidden');
        }
      }

      // Enhanced cart functionality
      function renderCart() {
        cartItemsList.innerHTML = '';
        let total = 0;
        const itemKeysInCart = Object.keys(cart);

        if (itemKeysInCart.length === 0) {
          emptyCartMessage.classList.remove('hidden');
          document.getElementById('cart-items-container').classList.add('hidden');
        } else {
          emptyCartMessage.classList.add('hidden');
          document.getElementById('cart-items-container').classList.remove('hidden');

          itemKeysInCart.forEach(cartKey => {
            const item = cart[cartKey];
            const itemPriceDisplay = (item.price / (item.price > 1000 ? 100 : 1)).toFixed(2);
            const itemTotal = ((item.price / (item.price > 1000 ? 100 : 1)) * item.quantity).toFixed(2);

            const itemElement = document.createElement('div');
            itemElement.className = 'cart-item';
            itemElement.innerHTML = `
              <div class="flex items-center justify-between">
                <div class="flex items-center space-x-4">
                  <img src="${item.imageUrl}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md">
                  <div>
                    <h4 class="text-lg font-semibold text-white">${item.name}</h4>
                    <p class="text-gray-400">$${itemPriceDisplay} x ${item.quantity} ${item.size ? `(Size: ${item.size})` : ''} = $${itemTotal}</p>
                  </div>
                </div>
                <div class="flex items-center space-x-2">
                  <button class="quantity-btn bg-gray-700 text-white px-3 py-1 rounded-md hover:bg-gray-600" data-cart-key="${cartKey}" data-change="-1">-</button>
                  <span class="text-white">${item.quantity}</span>
                  <button class="quantity-btn bg-gray-700 text-white px-3 py-1 rounded-md hover:bg-gray-600" data-cart-key="${cartKey}" data-change="1">+</button>
                  <button class="remove-from-cart-btn bg-red-600 text-white px-3 py-1 rounded-md hover:bg-red-700" data-cart-key="${cartKey}">Remove</button>
                </div>
              </div>
            `;
            cartItemsList.appendChild(itemElement);
            total += (item.price / (item.price > 1000 ? 100 : 1)) * item.quantity;
          });

          addCartEventListeners();
          updateCartTotals(total);
        }
      }

      function updateCartTotals(subtotal) {
        const shippingCost = getShippingCost(selectedShipping);
        const tax = subtotal * 0.08; // 8% tax
        let total = subtotal + shippingCost + tax;

        if (appliedPromo) {
          const discount = appliedPromo.discount === 0 ? shippingCost : subtotal * appliedPromo.discount;
          total -= discount;
        }

        document.getElementById('subtotal-amount').textContent = subtotal.toFixed(2);
        document.getElementById('shipping-amount').textContent = shippingCost.toFixed(2);
        document.getElementById('tax-amount').textContent = tax.toFixed(2);
        document.getElementById('total-amount').textContent = total.toFixed(2);
        modalTotalAmount.textContent = total.toFixed(2);
      }

      function getShippingCost(method) {
        switch(method) {
          case 'standard': return 5.99;
          case 'express': return 12.99;
          case 'overnight': return 24.99;
          default: return 5.99;
        }
      }

      function addCartEventListeners() {
        document.querySelectorAll('#cart-items-list .quantity-btn').forEach(button => {
          button.addEventListener('click', (event) => {
            const cartKey = event.target.dataset.cartKey;
            const change = parseInt(event.target.dataset.change);
            updateCartQuantity(cartKey, change);
          });
        });

        document.querySelectorAll('#cart-items-list .remove-from-cart-btn').forEach(button => {
          button.addEventListener('click', (event) => {
            const cartKey = event.target.dataset.cartKey;
            delete cart[cartKey];
            renderCart();
          });
        });
      }

      // Enhanced product detail functionality
      function showItemDetail(item) {
        const detailItem = localClothingItems.find(i => i.id === item.id);
        if (!detailItem) return;

        detailItemImage.src = detailItem.imageUrl;
        detailItemName.textContent = detailItem.name;
        detailItemPrice.textContent = `$${detailItem.price.toFixed(2)}`;
        detailItemDescription.textContent = detailItem.description;

        // Populate thumbnail gallery
        const thumbnailGallery = document.getElementById('thumbnail-gallery');
        thumbnailGallery.innerHTML = '';
        detailItem.images.forEach((img, index) => {
          const thumb = document.createElement('img');
          thumb.src = img;
          thumb.alt = `${detailItem.name} - View ${index + 1}`;
          thumb.className = `w-16 h-16 object-cover rounded cursor-pointer ${index === 0 ? 'active' : ''}`;
          thumb.addEventListener('click', () => {
            detailItemImage.src = img;
            thumbnailGallery.querySelectorAll('img').forEach(t => t.classList.remove('active'));
            thumb.classList.add('active');
          });
          thumbnailGallery.appendChild(thumb);
        });

        // Populate reviews
        const reviewsContainer = document.getElementById('reviews-container');
        reviewsContainer.innerHTML = '';
        detailItem.reviews.forEach(review => {
          const reviewElement = document.createElement('div');
          reviewElement.className = 'bg-gray-700 p-3 rounded-lg';
          reviewElement.innerHTML = `
            <div class="flex items-center gap-2 mb-2">
              <div class="flex text-yellow-400">
                ${'â˜…'.repeat(review.rating)}${'â˜†'.repeat(5-review.rating)}
              </div>
              <span class="text-gray-300 text-sm">${review.author}</span>
            </div>
            <p class="text-gray-300 text-sm">${review.comment}</p>
          `;
          reviewsContainer.appendChild(reviewElement);
        });

        // Show related products
        showRelatedProducts(item.id);

        detailAddToCartBtn.dataset.itemId = item.id;
        detailAddToCartBtn.dataset.itemName = item.name;
        detailAddToCartBtn.dataset.itemPrice = item.price;
        detailAddToCartBtn.dataset.itemImage = item.imageUrl;

        itemSizeSelect.value = 'M';
        currentQuantity = 1;
        document.getElementById('quantity-display').textContent = currentQuantity;

        showPage('item-detail-page');
      }

      function showRelatedProducts(currentItemId) {
        const relatedProductsGrid = document.getElementById('related-products-grid');
        const relatedItems = localClothingItems.filter(item => item.id !== currentItemId).slice(0, 4);
        
        relatedProductsGrid.innerHTML = '';
        relatedItems.forEach(item => {
          const itemCard = document.createElement('div');
          itemCard.className = 'bg-gray-800 rounded-lg overflow-hidden cursor-pointer hover:transform hover:scale-105 transition-all duration-300';
          itemCard.innerHTML = `
            <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-32 object-cover">
            <div class="p-4">
              <h4 class="text-white font-semibold mb-2">${item.name}</h4>
              <p class="text-gray-300">$${item.price.toFixed(2)}</p>
            </div>
          `;
          itemCard.addEventListener('click', () => showItemDetail(item));
          relatedProductsGrid.appendChild(itemCard);
        });
      }

      // Newsletter functionality
      function handleNewsletterSignup() {
        const email = document.getElementById('newsletter-email').value.trim();
        if (email && isValidEmail(email)) {
          showMessageBox('Thanks for subscribing! You\'ll hear from us soon.');
          document.getElementById('newsletter-email').value = '';
          // Here you would typically send this to your backend
        } else {
          showMessageBox('Please enter a valid email address.', 3000, true);
        }
      }

      function isValidEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      // Promo code functionality
      function applyPromoCode() {
        const promoInput = document.getElementById('promo-code-input');
        const promoMessage = document.getElementById('promo-message');
        const code = promoInput.value.trim().toUpperCase();
        
        if (promoCodes[code]) {
          appliedPromo = promoCodes[code];
          promoMessage.textContent = `Promo applied: ${appliedPromo.description}`;
          promoMessage.className = 'text-sm mt-2 text-green-400';
          promoMessage.classList.remove('hidden');
          promoInput.value = '';
          renderCart(); // Recalculate totals
          showMessageBox('Promo code applied successfully!');
        } else {
          promoMessage.textContent = 'Invalid promo code';
          promoMessage.className = 'text-sm mt-2 text-red-400';
          promoMessage.classList.remove('hidden');
        }
      }

      // Initialize enhanced features
      function initializeEnhancedFeatures() {
        // Search and filter event listeners
        document.getElementById('product-search').addEventListener('input', filterProducts);
        document.getElementById('category-filter').addEventListener('change', filterProducts);
        document.getElementById('price-filter').addEventListener('change', filterProducts);
        document.getElementById('size-filter').addEventListener('change', filterProducts);
        document.getElementById('clear-filters').addEventListener('click', clearFilters);

        // Wishlist view button
        document.getElementById('view-wishlist').addEventListener('click', showWishlistModal);

        // Newsletter signup
        document.getElementById('newsletter-signup-btn').addEventListener('click', handleNewsletterSignup);

        // Promo code
        document.getElementById('apply-promo-btn').addEventListener('click', applyPromoCode);

        // Shipping options
        document.querySelectorAll('input[name="shipping"]').forEach(radio => {
          radio.addEventListener('change', (e) => {
            selectedShipping = e.target.value;
            renderCart();
          });
        });

        // Quantity controls
        document.getElementById('quantity-increase').addEventListener('click', () => {
          currentQuantity++;
          document.getElementById('quantity-display').textContent = currentQuantity;
        });

        document.getElementById('quantity-decrease').addEventListener('click', () => {
          if (currentQuantity > 1) {
            currentQuantity--;
            document.getElementById('quantity-display').textContent = currentQuantity;
          }
        });

        // Size chart button
        document.getElementById('size-chart-btn').addEventListener('click', () => {
          document.getElementById('size-chart-modal').classList.add('show');
        });

        // Modal close buttons
        document.getElementById('size-chart-close-btn').addEventListener('click', () => {
          document.getElementById('size-chart-modal').classList.remove('show');
        });

        document.getElementById('wishlist-close-btn').addEventListener('click', () => {
          document.getElementById('wishlist-modal').classList.remove('show');
        });

        // Start shopping button
        document.getElementById('start-shopping-btn').addEventListener('click', () => {
          showPage('shop-page');
        });

        // Update initial counts
        updateWishlistCount();
      }

      function clearFilters() {
        document.getElementById('product-search').value = '';
        document.getElementById('category-filter').value = '';
        document.getElementById('price-filter').value = '';
        document.getElementById('size-filter').value = '';
        filterProducts();
      }

      function showWishlistModal() {
        const wishlistContent = document.getElementById('wishlist-content');
        wishlistContent.innerHTML = '';
        
        if (wishlist.length === 0) {
          wishlistContent.innerHTML = `
            <div class="text-center py-12">
              <span class="text-6xl mb-4 block">ðŸ’”</span>
              <p class="text-xl text-gray-300 mb-2">Your wishlist is empty</p>
              <p class="text-gray-500">Start adding items you love!</p>
            </div>
          `;
        } else {
          wishlist.forEach(item => {
            const wishlistItem = document.createElement('div');
            wishlistItem.className = 'flex items-center justify-between p-4 bg-gray-700 rounded-lg mb-3';
            wishlistItem.innerHTML = `
              <div class="flex items-center space-x-4">
                <img src="${item.imageUrl}" alt="${item.name}" class="w-16 h-16 object-cover rounded-md">
                <div>
                  <h4 class="text-white font-semibold">${item.name}</h4>
                  <p class="text-gray-300">$${item.price.toFixed(2)}</p>
                </div>
              </div>
              <div class="flex space-x-2">
                <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors" onclick="addToCart({id: '${item.id}', name: '${item.name}', price: ${item.price}, imageUrl: '${item.imageUrl}', size: 'M'})">Add to Cart</button>
                <button class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors" onclick="removeFromWishlist('${item.id}')">Remove</button>
              </div>
            `;
            wishlistContent.appendChild(wishlistItem);
          });
        }
        
        document.getElementById('wishlist-modal').classList.add('show');
      }

      function removeFromWishlist(itemId) {
        wishlist = wishlist.filter(item => item.id !== itemId);
        localStorage.setItem('wishlist', JSON.stringify(wishlist));
        updateWishlistCount();
        showWishlistModal(); // Refresh modal
      }

      function splitAndAnimateLetters(elementId, baseDelay = 0) {
        const element = document.getElementById(elementId);
        if (!element) return;

        const text = element.textContent;
        element.textContent = '';

        const fragment = document.createDocumentFragment();

        for (let i = 0; i < text.length; i++) {
          const char = text[i];
          const span = document.createElement('span');
          span.textContent = char;
          span.classList.add('animated-letter');
          if (char === ' ') {
            span.classList.add('space');
          }
          span.style.animationDelay = `${baseDelay + (i * 0.02)}s`;
          fragment.appendChild(span);
        }
        element.appendChild(fragment);
      }

      function animateBlock(elementId, delay) {
        const element = typeof elementId === 'string' ? document.getElementById(elementId) : elementId;
        if (element) {
          element.style.animationDelay = `${delay}s`;
        }
      }

      function typeMessage(element, message, callback, delay = 70) {
        let i = 0;
        element.textContent = '';
        element.classList.remove('animate-slide-in-up');
        const interval = setInterval(() => {
          if (i < message.length) {
            element.textContent += message.charAt(i);
            i++;
          } else {
            clearInterval(interval);
            element.classList.add('animate-slide-in-up');
            if (callback) setTimeout(callback, 500);
          }
        }, delay);
      }

      function showMessageBox(message, duration = 3000, isError = false) {
          messageText.textContent = message;
          messageBox.classList.remove('bg-red-600', 'bg-green-600');
          messageBox.classList.add(isError ? 'bg-red-600' : 'bg-green-600');
          messageBox.querySelector('i').className = isError ? 'fas fa-times-circle' : 'fas fa-check-circle';

          messageBox.classList.add('show');

          setTimeout(() => {
              messageBox.classList.remove('show');
          }, duration);
      }

      async function fetchPrintifyShops() {
          try {
              const response = await fetch(`${PRINTIFY_API_BASE_URL}/shops.json`, {
                  headers: {
                      'Authorization': `Bearer ${PRINTIFY_API_KEY}`
                  }
              });
              if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
              }
              const data = await response.json();
              if (data.length > 0) {
                  return data[0].id;
              }
              return null;
          } catch (error) {
              console.error("Error fetching Printify shops:", error);
              throw error;
          }
      }

      async function renderShopItems() {
        loadingIndicator.classList.remove('hidden');
        loadingIndicator.classList.add('animate-slide-in-up');
        itemsGrid.innerHTML = '';
        noStockMessage.classList.add('hidden');
        statusMessageElement.classList.add('hidden');

        let productsToRender = [];

        try {
            const shopId = await fetchPrintifyShops();
            if (shopId) {
                const response = await fetch(`${PRINTIFY_API_BASE_URL}/shops/${shopId}/products.json`, {
                    headers: {
                        'Authorization': `Bearer ${PRINTIFY_API_KEY}`
                    }
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                productsToRender = data.data;
            } else {
                throw new Error("No Printify shop found.");
            }
        } catch (error) {
            console.error("Failed to fetch from Printify, falling back to local data:", error);
            loadingIndicator.classList.remove('animate-slide-in-up');
            loadingIndicator.classList.add('hidden');
            statusMessageElement.classList.remove('hidden');
            await new Promise(resolve => {
                typeMessage(statusMessageElement, "Couldn't connect, fetching local data...", () => {
                    statusMessageElement.textContent = '';
                    statusMessageElement.classList.add('hidden');
                    statusMessageElement.classList.remove('animate-slide-in-up');
                    resolve();
                });
            });
            productsToRender = localClothingItems;
        } finally {
            loadingIndicator.classList.add('hidden');
            loadingIndicator.classList.remove('animate-slide-in-up');

            if (!productsToRender || productsToRender.length === 0) {
              noStockMessage.classList.remove('hidden');
              noStockMessage.classList.add('animate-slide-in-up');
            } else {
              productsToRender.forEach((item, index) => {
                const imageUrl = item.images && item.images.length > 0 ? item.images[0].src : item.imageUrl || 'https://placehold.co/300x300/CCCCCC/000000?text=No+Image';
                const price = item.price ? (item.price / 100).toFixed(2) : item.price.toFixed(2);
                const description = item.description || "A high-quality item from Ultre. Designed for comfort and durability.";

                const itemCard = document.createElement('div');
                itemCard.className = 'bg-gray-800 rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 flex flex-col cursor-pointer product-card';
                itemCard.style.animationDelay = `${0.1 * index}s`;
                itemCard.dataset.itemId = item.id;
                itemCard.dataset.itemName = item.title || item.name;
                itemCard.dataset.itemPrice = item.price;
                itemCard.dataset.itemImage = imageUrl;
                itemCard.dataset.itemDescription = description;

                itemCard.innerHTML = `
                  <img src="${imageUrl}" alt="${item.title || item.name}" class="w-full h-48 object-cover">
                  <div class="p-4 flex flex-col justify-between flex-grow">
                    <h3 class="text-xl font-semibold text-white mb-2">${item.title || item.name}</h3>
                    <p class="text-gray-300 text-lg mb-4">$${price}</p>
                    <button class="add-to-cart-btn mt-auto bg-white text-gray-900 font-bold py-2 px-4 rounded-md hover:bg-gray-200 transition-colors" data-item-id="${item.id}" data-item-name="${item.title || item.name}" data-item-price="${item.price}" data-item-image="${imageUrl}">Add to Cart</button>
                  </div>
                `;
                itemsGrid.appendChild(itemCard);
              });

              document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                  event.stopPropagation();
                  const itemId = event.target.dataset.itemId;
                  const itemName = event.target.dataset.itemName;
                  const itemPrice = parseFloat(event.target.dataset.itemPrice);
                  const itemImage = event.target.dataset.itemImage;
                  addToCart({ id: itemId, name: itemName, price: itemPrice, imageUrl: itemImage, size: 'M' });
                  showMessageBox(`${itemName} (Size: M) has successfully been added to cart!`);
                });
              });

              document.querySelectorAll('.product-card').forEach(card => {
                  card.addEventListener('click', (event) => {
                      const itemId = card.dataset.itemId;
                      const itemName = card.dataset.itemName;
                      const itemPrice = parseFloat(card.dataset.itemPrice);
                      const itemImage = card.target.dataset.itemImage;
                      const itemDescription = card.dataset.itemDescription;
                      showItemDetail({ id: itemId, name: itemName, price: itemPrice, imageUrl: itemImage, description: itemDescription });
                  });
              });
            }
        }
      }

      function addToCart(item) {
        const cartKey = `${item.id}-${item.size}`;
        if (cart[cartKey]) {
          cart[cartKey].quantity++;
        } else {
          cart[cartKey] = { ...item, quantity: 1 };
        }
        renderCart();
      }

      function updateCartQuantity(cartKey, change) {
        if (cart[cartKey]) {
          cart[cartKey].quantity += change;
          if (cart[cartKey].quantity <= 0) {
            delete cart[cartKey];
          }
        }
        renderCart();
      }

      function updateNavIndicator(activePageId) {
          const newActiveNavLinkLi = document.querySelector(`nav ul li[data-page-id="${activePageId}"]`);

          if (newActiveNavLinkLi === currentActiveNavLinkLi || !newActiveNavLinkLi || isNavigating) {
              if (!currentActiveNavLinkLi && newActiveNavLinkLi) {
              } else {
                  return;
              }
          }

          isNavigating = true;

          document.querySelectorAll('nav ul li a').forEach(link => {
              link.classList.remove('active-nav-link');
          });

          const navRect = newActiveNavLinkLi.closest('nav').getBoundingClientRect();
          const liRect = newActiveNavLinkLi.getBoundingClientRect();
          const activeAnchor = newActiveNavLinkLi.querySelector('a');

          if (activeAnchor) {
              activeAnchor.classList.add('active-nav-link');
          }

          const paddingX = 8;
          const paddingY = 4;
          const targetWidth = liRect.width + paddingX * 2;
          const targetHeight = liRect.height + paddingY * 2;
          const targetLeft = liRect.left - navRect.left - paddingX;
          const targetTop = liRect.top - navRect.top - paddingY;

          const currentLeft = navIndicator.offsetLeft;
          const currentWidth = navIndicator.offsetWidth;
          const currentTop = navIndicator.offsetTop;
          const currentHeight = navIndicator.offsetHeight;

          if (currentActiveNavLinkLi) {
              navIndicator.style.left = `${currentLeft}px`;
              navIndicator.style.top = `${currentTop}px`;
              navIndicator.style.width = `${currentWidth}px`;
              navIndicator.style.height = `${currentHeight}px`;
              navIndicator.style.opacity = '1';

              void navIndicator.offsetWidth;

              const currentRight = currentLeft + currentWidth;
              const targetRight = targetLeft + targetWidth;

              const minLeft = Math.min(currentLeft, targetLeft);
              const maxRight = Math.max(currentRight, targetRight);
              const stretchedWidth = maxRight - minLeft;

              navIndicator.style.left = `${minLeft}px`;
              navIndicator.style.width = `${stretchedWidth}px`;
              navIndicator.style.top = `${targetTop}px`;
              navIndicator.style.height = `${targetHeight}px`;

              navIndicator.ontransitionend = () => {
                  navIndicator.ontransitionend = null;

                  navIndicator.style.left = `${targetLeft}px`;
                  navIndicator.style.width = `${targetWidth}px`;
                  navIndicator.style.height = `${targetHeight}px`;

                  isNavigating = false;
              };

          } else {
              navIndicator.style.left = `${targetLeft}px`;
              navIndicator.style.top = `${targetTop}px`;
              navIndicator.style.width = `${targetWidth}px`;
              navIndicator.style.height = `${targetHeight}px`;
              navIndicator.style.opacity = '1';
              isNavigating = false;
          }
          currentActiveNavLinkLi = newActiveNavLinkLi;
      }

      function updateNavBarVisibility(inSupportMode) {
          mainNavItems.forEach(item => {
              item.classList.add('hidden');
          });

          supportNavItem.classList.add('hidden'); // Hide desktop support item by default

          mobileNavItems.forEach(item => {
              if (inSupportMode) {
                  if (item.id === 'mobile-support-nav-item') {
                      item.classList.remove('hidden');
                  } else {
                      item.classList.add('hidden');
                  }
              } else {
                  item.classList.remove('hidden');
              }
          });
      }


      function showPage(pageId, callback = null) {
        const allMainSections = document.querySelectorAll('#main-website-content-wrapper > section');
        allMainSections.forEach(section => {
          section.classList.remove('active-page');
        });

        const targetPage = document.getElementById(pageId);
        if (targetPage) {
          targetPage.classList.add('active-page');
          window.scrollTo(0, 0);

          const newSupportMode = (pageId === 'support-main' || pageId === 'chat-interface');
          if (newSupportMode !== supportMode) {
              supportMode = newSupportMode;
              if (window.innerWidth < 768) {
                  updateNavBarVisibility(supportMode);
              }
          }

          if (pageId === 'shop-page') {
            renderShopItems();
          } else if (pageId === 'cart-main') {
            renderCart();
          } else if (pageId === 'onboarding-main') {
              typeMessage(onboardingTitle, "What should we call you?", callback);
          } else if (pageId === 'support-main') {
              typeMessage(supportQuestion, "What type of support do you need?", callback);
          } else if (pageId === 'chat-interface') {
              displayChatMessage("Hey, I'm UltreBot â€” what do you need help with today?", 'bot');
              chatInput.focus();
          } else if (pageId === 'settings-main') {
              updateSettingsContent('general');
          }

          if (window.innerWidth >= 768) {
              updateNavIndicator(pageId);
          }
          mobileNavOverlay.classList.remove('open');
        }
      }

      function displayChatMessage(message, sender, isTypingIndicator = false) {
          const messageElement = document.createElement('div');
          messageElement.classList.add('chat-message-bubble');

          if (sender === 'user') {
              messageElement.classList.add('user-message');
              messageElement.textContent = message;
          } else {
              messageElement.classList.add('bot-message');
              const avatar = document.createElement('div');
              avatar.classList.add('bot-avatar');
              avatar.innerHTML = '<i class="fas fa-robot"></i>';
              messageElement.appendChild(avatar);

              const textContent = document.createElement('span');
              textContent.textContent = message;
              messageElement.appendChild(textContent);

              if (isTypingIndicator) {
                  messageElement.id = 'typing-indicator';
                  textContent.textContent = '';
                  textContent.classList.add('dot-pulse-container');
                  textContent.innerHTML = '<div class="dot-pulse"></div><div class="dot-pulse"></div><div class="dot-pulse"></div>';
              }
          }
          chatMessages.appendChild(messageElement);
          chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      async function sendChatToBot(userMessage) {
          if (isBotTyping) return;

          displayChatMessage(userMessage, 'user');
          chatHistory.push({ role: "user", content: userMessage });
          chatInput.value = '';

          isBotTyping = true;
          displayChatMessage('', 'bot', true);

          try {
              const response = await fetch(DEEPSEEK_API_URL, {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'Authorization': `Bearer ${DEEPSEEK_API_KEY}`
                  },
                  body: JSON.stringify({
                      model: 'deepseek-chat',
                      messages: chatHistory,
                      stream: false
                  })
              });

              if (!response.ok) {
                  const errorData = await response.json();
                  throw new Error(`API error: ${response.status} - ${errorData.message || response.statusText}`);
              }

              const data = await response.json();
              const botResponse = data.choices[0].message.content;
              chatHistory.push({ role: "assistant", content: botResponse });

              const typingIndicatorElement = document.getElementById('typing-indicator');
              if (typingIndicatorElement) {
                  typingIndicatorElement.remove();
              }

              let i = 0;
              const botMessageElement = document.createElement('div');
              botMessageElement.classList.add('chat-message-bubble', 'bot-message');
              const botAvatar = document.createElement('div');
              botAvatar.classList.add('bot-avatar');
              botAvatar.innerHTML = '<i class="fas fa-robot"></i>';
              botMessageElement.appendChild(botAvatar);
              const textContent = document.createElement('span');
              botMessageElement.appendChild(textContent);
              chatMessages.appendChild(botMessageElement);
              chatMessages.scrollTop = chatMessages.scrollHeight;

              const typingInterval = setInterval(() => {
                  if (i < botResponse.length) {
                      textContent.textContent += botResponse.charAt(i);
                      i++;
                      chatMessages.scrollTop = chatMessages.scrollHeight;
                  } else {
                      clearInterval(typingInterval);
                      isBotTyping = false;
                  }
              }, 30);
          } catch (error) {
              console.error("Error communicating with UltreBot:", error);
              const typingIndicatorElement = document.getElementById('typing-indicator');
              if (typingIndicatorElement) {
                  typingIndicatorElement.remove();
              }
              displayChatMessage("Oops! I'm having trouble connecting right now. Please try again later.", 'bot');
              isBotTyping = false;
          }
      }

      function updateSettingsContent(category) {
          settingsContentTitle.textContent = `${category.charAt(0).toUpperCase() + category.slice(1).replace('-', ' ')} Settings`;
          settingsContentArea.innerHTML = '';

          let contentHtml = '';
          const userFirstName = localStorage.getItem('userFirstName') || '';
          const userLastName = localStorage.getItem('userLastName') || '';

          switch (category) {
              case 'general':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Basic settings for your account and site experience.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <div>
                                  <label for="general-first-name" class="block text-sm font-medium text-gray-300 mb-1">First Name</label>
                                  <input type="text" id="general-first-name" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white" value="${userFirstName}">
                              </div>
                              <div>
                                  <label for="general-last-name" class="block text-sm font-medium text-gray-300 mb-1">Last Name</label>
                                  <input type="text" id="general-last-name" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white" value="${userLastName}">
                              </div>
                              <div>
                                  <label for="language-select" class="block text-sm font-medium text-gray-300 mb-1">Language</label>
                                  <select id="language-select" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
                                      <option value="en">English</option>
                                      <option value="es">EspaÃ±ol</option>
                                      <option value="fr">FranÃ§ais</option>
                                  </select>
                              </div>
                              <div>
                                  <label for="timezone-select" class="block text-sm font-medium text-gray-300 mb-1">Time Zone</label>
                                  <select id="timezone-select" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
                                      <option value="utc">UTC</option>
                                      <option value="est">Eastern Standard Time</option>
                                      <option value="pst">Pacific Standard Time</option>
                                      <option value="dubai">Dubai (GMT+4)</option>
                                  </select>
                              </div>
                          </div>
                          <button id="save-general-settings" class="shop-button mt-6 w-full">Save General Settings</button>
                      </div>
                  `;
                  break;
              case 'accessibility':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Adjust settings for better accessibility.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">High Contrast Mode</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="high-contrast-toggle" class="sr-only peer">
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Enable Screen Reader Support</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="screen-reader-toggle" class="sr-only peer">
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <div>
                                  <label for="font-size-select" class="block text-sm font-medium text-gray-300 mb-1">Font Size</label>
                                  <select id="font-size-select" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
                                      <option value="small">Small</option>
                                      <option value="medium" selected>Medium</option>
                                      <option value="large">Large</option>
                                  </select>
                              </div>
                          </div>
                          <button id="save-accessibility-settings" class="shop-button mt-6 w-full">Save Accessibility Settings</button>
                      </div>
                  `;
                  break;
              case 'privacy':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Manage your data and privacy preferences.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Allow Personalized Ads</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="personalized-ads-toggle" class="sr-only peer" checked>
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Share Anonymous Usage Data</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="share-usage-data-toggle" class="sr-only peer">
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <button id="download-data-btn" class="shop-button mt-6 w-full bg-blue-600 hover:bg-blue-700">Download My Data</button>
                          </div>
                      </div>
                  `;
                  break;
              case 'visuals':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Customize the look and feel of the site.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <div>
                                  <label for="theme-select" class="block text-sm font-medium text-gray-300 mb-1">Theme</label>
                                  <select id="theme-select" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white">
                                      <option value="dark">Dark (Default)</option>
                                      <option value="light">Light</option>
                                      <option value="system">System Preference</option>
                                  </select>
                              </div>
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Enable Animations</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="animations-toggle" class="sr-only peer" checked>
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                          </div>
                          <button id="save-visual-settings" class="shop-button mt-6 w-full">Save Visual Settings</button>
                      </div>
                  `;
                  break;
              case 'payment-method':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Manage your saved payment methods.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <p class="text-sm text-gray-400">No payment methods are currently saved for your account.</p>
                              <h3 class="text-lg font-semibold text-white mt-6 mb-3">Add New Payment Method</h3>
                              <div>
                                  <label for="card-number" class="block text-sm font-medium text-gray-300 mb-1">Card Number</label>
                                  <input type="text" id="card-number" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white" placeholder="**** **** **** ****">
                              </div>
                              <div class="flex gap-4">
                                  <div class="flex-1">
                                      <label for="expiry-date" class="block text-sm font-medium text-gray-300 mb-1">Expiry Date (MM/YY)</label>
                                      <input type="text" id="expiry-date" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white" placeholder="MM/YY">
                                  </div>
                                  <div class="flex-1">
                                      <label for="cvv" class="block text-sm font-medium text-gray-300 mb-1">CVV</label>
                                      <input type="text" id="cvv" class="w-full p-2 rounded-md bg-gray-600 text-white border border-gray-500 focus:outline-none focus:border-white" placeholder="***">
                                  </div>
                              </div>
                          </div>
                          <button id="save-payment-method" class="shop-button mt-6 w-full bg-blue-600 hover:bg-blue-700">Save Payment Method</button>
                      </div>
                  `;
                  break;
              case 'notifications':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Control how you receive notifications.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Email Notifications</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="email-notifications-toggle" class="sr-only peer" checked>
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Promotional Offers</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="promotional-offers-toggle" class="sr-only peer">
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                              <div class="flex items-center justify-between">
                                  <span class="text-sm font-medium text-gray-300">Push Notifications</span>
                                  <label class="relative inline-flex items-center cursor-pointer">
                                      <input type="checkbox" id="push-notifications-toggle" class="sr-only peer">
                                      <div class="w-11 h-6 bg-gray-600 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                                  </label>
                              </div>
                          </div>
                          <button id="save-notification-settings" class="shop-button mt-6 w-full">Save Notification Settings</button>
                      </div>
                  `;
                  break;
              case 'security':
                  contentHtml = `
                      <div class="bg-gray-700 border border-gray-600 text-gray-200 p-4 rounded-lg">
                          <p class="font-semibold mb-4">Manage your account security settings.</p>
                          <div class="mt-4 space-y-4 text-left">
                              <button id="change-password-btn" class="shop-button w-full bg-red-600 hover:bg-red-700">Change Password</button>
                              <button id="two-factor-auth-btn" class="shop-button w-full bg-yellow-600 hover:bg-yellow-700">Enable Two-Factor Authentication</button>
                              <div class="mt-6">
                                  <h3 class="text-lg font-semibold text-white mb-2">Login Activity</h3>
                                  <ul class="list-disc list-inside text-sm text-gray-300 space-y-1">
                                      <li>Last login: July 15, 2025 from Chrome on Windows (Dubai, UAE)</li>
                                      <li>Previous login: July 14, 2025 from Safari on iOS (London, UK)</li>
                                  </ul>
                                  <button id="view-all-activity-btn" class="shop-button mt-4 bg-gray-600 hover:bg-gray-700 w-full">View All Activity</button>
                              </div>
                          </div>
                      </div>
                  `;
                  break;

      onboardingSaveBtn.addEventListener('click', () => {
          const firstName = onboardingFirstNameInput.value.trim();
          const lastName = onboardingLastNameInput.value.trim();

          onboardingErrorMessage.classList.add('hidden');

          if (!firstName || !lastName) {
              onboardingErrorMessage.textContent = 'Please enter both your first and last name.';
              onboardingErrorMessage.classList.remove('hidden');
              showMessageBox('Please fill in all fields!', 3000, true);
              return;
          }

          localStorage.setItem('userFirstName', firstName);
          localStorage.setItem('userLastName', lastName);

          showMessageBox(`Welcome, ${firstName}! Enjoy shopping!`, 3000);
          setTimeout(() => {
              showPage('home-main');
              onboardingFirstNameInput.value = '';
              onboardingLastNameInput.value = '';
          }, 1000);
      });

      document.querySelectorAll('.auth-form-container .form-link').forEach(link => {
          link.addEventListener('click', function(e) {
              e.preventDefault();
              const targetId = this.getAttribute('href').substring(1);
              showPage(targetId);
          });
      });

      quickEasyBtn.addEventListener('click', () => {
          showPage('chat-interface');
      });

      advancedSupportBtn.addEventListener('click', () => {
          window.location.href = 'mailto:support@ultre.com?subject=Support%20Request&body=Hello%20Ultre%20Support%2C%0A%0AI%20need%20help%20with%3A%0A%0A[Please%20describe%20your%20issue%20here]';
      });

      backToMainSiteBtn.addEventListener('click', () => {
          showPage('home-main');
      });

      sendChatBtn.addEventListener('click', () => {
          const message = chatInput.value.trim();
          if (message) {
              sendChatToBot(message);
          }
      });

      chatInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
              sendChatBtn.click();
          }
      });

      settingsNavLinks.forEach(link => {
          link.addEventListener('click', (e) => {
              e.preventDefault();
              settingsNavLinks.forEach(navLink => navLink.classList.remove('bg-gray-700', 'text-white'));
              e.target.classList.add('bg-gray-700', 'text-white');

              const category = e.target.dataset.settingCategory;
              updateSettingsContent(category);
          });
      });

      hamburgerIcon.addEventListener('click', () => {
          mobileNavOverlay.classList.add('open');
      });

      mobileNavCloseBtn.addEventListener('click', () => {
          mobileNavOverlay.classList.remove('open');
      });

      mobileNavItems.forEach(item => {
          item.addEventListener('click', function (e) {
              e.preventDefault();
              const targetId = this.getAttribute('data-page-id');
              showPage(targetId);
              mobileNavOverlay.classList.remove('open');
          });
      });


      window.onload = function() {
        splitAndAnimateLetters('mainTagline', 1.5);

        const shopButton = document.getElementById('shopButton');
        shopButton.addEventListener('click', () => {
          transitionOverlay.classList.add('active');

          transitionOverlay.addEventListener('transitionend', function handler() {
            transitionOverlay.removeEventListener('transitionend', handler);

            introSection.classList.add('hidden-content');
            mainWebsiteContentWrapper.classList.add('active-content');

            supportMode = false;
            showPage('home-main');

            transitionOverlay.classList.remove('active');
          });
        });

        document.querySelectorAll('nav ul li a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                showPage(targetId);
            });
        });

        document.querySelectorAll('.profile-dropdown .dropdown-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                showPage(targetId);
            });
        });

        window.addEventListener('resize', () => {
            const currentPage = document.querySelector('#main-website-content-wrapper > section.active-page');
            if (currentPage) {
                if (window.innerWidth >= 768) {
                    updateNavIndicator(currentPage.id);
                }
            }
        });

        const initialSettingLink = document.querySelector('.settings-nav-link[data-setting-category="general"]');
        if (initialSettingLink) {
            initialSettingLink.classList.add('bg-gray-700', 'text-white');
            updateSettingsContent('general');
        }

        // Initialize enhanced features
        initializeEnhancedFeatures();
        
        // Initialize enhanced authentication
        initializeEnhancedAuth();
      };

      // Password strength checker
      function checkPasswordStrength(password) {
          let strength = 0;
          let feedback = '';

          if (password.length >= 8) strength += 1;
          if (/[a-z]/.test(password)) strength += 1;
          if (/[A-Z]/.test(password)) strength += 1;
          if (/[0-9]/.test(password)) strength += 1;
          if (/[^A-Za-z0-9]/.test(password)) strength += 1;

          const strengthFill = document.getElementById('password-strength-fill');
          const strengthText = document.getElementById('password-strength-text');

          if (strengthFill && strengthText) {
              strengthFill.className = 'strength-fill';
              if (strength <= 2) {
                  strengthFill.classList.add('weak');
                  feedback = 'Weak password';
              } else if (strength === 3) {
                  strengthFill.classList.add('fair');
                  feedback = 'Fair password';
              } else if (strength === 4) {
                  strengthFill.classList.add('good');
                  feedback = 'Good password';
              } else {
                  strengthFill.classList.add('strong');
                  feedback = 'Strong password';
              }
              strengthText.textContent = feedback;
          }
      }

      // Password visibility toggle
      function togglePassword(inputId) {
          const input = document.getElementById(inputId);
          const toggle = input.nextElementSibling;
          const icon = toggle.querySelector('i');

          if (input.type === 'password') {
              input.type = 'text';
              icon.className = 'fas fa-eye-slash';
          } else {
              input.type = 'password';
              icon.className = 'fas fa-eye';
          }
      }

      // Enhanced form validation
      function validateForm(formId) {
          const form = document.getElementById(formId);
          const inputs = form.querySelectorAll('input[required]');
          let isValid = true;

          inputs.forEach(input => {
              if (!input.value.trim()) {
                  showInputError(input, 'This field is required');
                  isValid = false;
              } else {
                  clearInputError(input);
              }

              // Email validation
              if (input.type === 'email' && input.value.trim()) {
                  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                  if (!emailRegex.test(input.value)) {
                      showInputError(input, 'Please enter a valid email address');
                      isValid = false;
                  }
              }

              // Password confirmation validation
              if (input.id === 'signup-confirm-password') {
                  const password = document.getElementById('signup-password').value;
                  if (input.value !== password) {
                      showInputError(input, 'Passwords do not match');
                      isValid = false;
                  }
              }
          });

          return isValid;
      }

      function showInputError(input, message) {
          clearInputError(input);
          input.style.borderColor = '#ef4444';
          const errorDiv = document.createElement('div');
          errorDiv.className = 'input-error text-red-400 text-sm mt-1';
          errorDiv.textContent = message;
          input.parentNode.appendChild(errorDiv);
      }

      function clearInputError(input) {
          input.style.borderColor = '';
          const errorDiv = input.parentNode.querySelector('.input-error');
          if (errorDiv) {
              errorDiv.remove();
          }
      }

      // Enhanced form submission with loading states
      function showFormLoading(formId) {
          const form = document.getElementById(formId);
          const submitBtn = form.querySelector('button[type="submit"]');
          const btnText = submitBtn.querySelector('.btn-text');
          const btnLoader = submitBtn.querySelector('.btn-loader');

          btnText.classList.add('hidden');
          btnLoader.classList.remove('hidden');
          submitBtn.disabled = true;
      }

      function hideFormLoading(formId) {
          const form = document.getElementById(formId);
          const submitBtn = form.querySelector('button[type="submit"]');
          const btnText = submitBtn.querySelector('.btn-text');
          const btnLoader = submitBtn.querySelector('.btn-loader');

          btnText.classList.remove('hidden');
          btnLoader.classList.add('hidden');
          submitBtn.disabled = false;
      }

      // Enhanced sign-in functionality
      function handleEnhancedSignIn(e) {
          e.preventDefault();
          
          if (!validateForm('signin-form')) {
              return;
          }

          showFormLoading('signin-form');

          // Simulate API call
          setTimeout(() => {
              hideFormLoading('signin-form');
              showMessageBox('Signed in successfully! Welcome back!', 3000);
              
              // Store user data
              const email = document.getElementById('signin-email').value.trim();
              const rememberMe = document.getElementById('remember-me').checked;
              
              if (rememberMe) {
                  localStorage.setItem('userEmail', email);
                  localStorage.setItem('rememberMe', 'true');
              }

              setTimeout(() => {
                  showPage('home-main');
                  // Reset form
                  document.getElementById('signin-form').reset();
              }, 1000);
          }, 2000);
      }

      // Enhanced sign-up functionality
      function handleEnhancedSignUp(e) {
          e.preventDefault();
          
          if (!validateForm('signup-form')) {
              return;
          }

          showFormLoading('signup-form');

          // Simulate API call
          setTimeout(() => {
              hideFormLoading('signup-form');
              showMessageBox('Account created successfully! Please tell us your name!', 3000);
              
              // Store user data
              const email = document.getElementById('signup-email').value.trim();
              const firstName = document.getElementById('signup-first-name').value.trim();
              const lastName = document.getElementById('signup-last-name').value.trim();
              const newsletterSignup = document.getElementById('newsletter-signup').checked;
              
              localStorage.setItem('userEmail', email);
              localStorage.setItem('userFirstName', firstName);
              localStorage.setItem('userLastName', lastName);
              if (newsletterSignup) {
                  localStorage.setItem('newsletterSubscribed', 'true');
              }

              setTimeout(() => {
                  showPage('onboarding-main');
                  // Reset form
                  document.getElementById('signup-form').reset();
              }, 1000);
          }, 2000);
      }

      // Social authentication handlers
      function handleGoogleAuth() {
          showMessageBox('Google authentication coming soon!', 3000);
      }

      function handleAppleAuth() {
          showMessageBox('Apple authentication coming soon!', 3000);
      }

      // Initialize enhanced authentication
      function initializeEnhancedAuth() {
          // Password strength monitoring
          const passwordInput = document.getElementById('signup-password');
          if (passwordInput) {
              passwordInput.addEventListener('input', (e) => {
                  checkPasswordStrength(e.target.value);
              });
          }

          // Form submissions
          const signinForm = document.getElementById('signin-form');
          if (signinForm) {
              signinForm.addEventListener('submit', handleEnhancedSignIn);
          }

          const signupForm = document.getElementById('signup-form');
          if (signupForm) {
              signupForm.addEventListener('submit', handleEnhancedSignUp);
          }

          // Social auth buttons
          document.querySelectorAll('.google-btn').forEach(btn => {
              btn.addEventListener('click', handleGoogleAuth);
          });

          document.querySelectorAll('.apple-btn').forEach(btn => {
              btn.addEventListener('click', handleAppleAuth);
          });

          // Auto-fill remembered email
          const rememberedEmail = localStorage.getItem('userEmail');
          const rememberMe = localStorage.getItem('rememberMe');
          
          if (rememberedEmail && rememberMe === 'true') {
              const emailInput = document.getElementById('signin-email');
              if (emailInput) {
                  emailInput.value = rememberedEmail;
                  document.getElementById('remember-me').checked = true;
              }
          }

          // Enhanced input animations
          document.querySelectorAll('.form-input').forEach(input => {
              input.addEventListener('focus', () => {
                  input.parentNode.classList.add('focused');
              });

              input.addEventListener('blur', () => {
                  if (!input.value) {
                      input.parentNode.classList.remove('focused');
                  }
              });
          });
      }

      // Product comparison functionality
      let comparisonList = [];
      const maxComparisonItems = 4;

      function addToComparison(productId) {
        if (comparisonList.length >= maxComparisonItems) {
          showMessageBox('Maximum 4 items can be compared at once', 3000, true);
          return;
        }
        
        if (comparisonList.includes(productId)) {
          showMessageBox('Item already in comparison', 3000, true);
          return;
        }
        
        comparisonList.push(productId);
        updateComparisonUI();
        showMessageBox('Added to comparison');
      }

      function removeFromComparison(productId) {
        comparisonList = comparisonList.filter(id => id !== productId);
        updateComparisonUI();
      }

      function updateComparisonUI() {
        const comparisonBtn = document.getElementById('comparison-btn');
        if (comparisonBtn) {
          comparisonBtn.innerHTML = `Compare (${comparisonList.length})`;
          comparisonBtn.disabled = comparisonList.length < 2;
        }
      }

      function showComparisonModal() {
        if (comparisonList.length < 2) {
          showMessageBox('Please select at least 2 items to compare', 3000, true);
          return;
        }
        
        const comparisonContent = document.getElementById('comparison-content');
        const productsToCompare = localClothingItems.filter(item => comparisonList.includes(item.id));
        
        let comparisonHTML = `
          <div class="comparison-table overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="border-b border-gray-600">
                  <th class="p-3 text-left text-white">Features</th>
                  ${productsToCompare.map(product => `
                    <th class="p-3 text-center text-white">
                      <div class="product-comparison-header">
                        <img src="${product.imageUrl}" alt="${product.name}" class="w-16 h-16 object-cover rounded mx-auto mb-2">
                        <h4 class="font-semibold">${product.name}</h4>
                        <p class="text-blue-400">$${product.price.toFixed(2)}</p>
                        <button onclick="removeFromComparison('${product.id}')" class="text-red-400 hover:text-red-300 text-xs">
                          <i class="fas fa-times"></i> Remove
                        </button>
                      </div>
                    </th>
                  `).join('')}
                </tr>
              </thead>
              <tbody>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Category</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">${product.category}</td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Material</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">${product.material}</td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Style</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">${product.style}</td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Sizes Available</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">${product.sizes.join(', ')}</td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Colors</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">${product.colors.join(', ')}</td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Features</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">
                      <ul class="text-xs space-y-1">
                        ${product.features.map(feature => `<li>â€¢ ${feature}</li>`).join('')}
                      </ul>
                    </td>
                  `).join('')}
                </tr>
                <tr class="border-b border-gray-700">
                  <td class="p-3 text-white font-semibold">Rating</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center text-gray-300">
                      <div class="flex justify-center text-yellow-400">
                        ${'â˜…'.repeat(Math.floor(product.reviews.reduce((acc, rev) => acc + rev.rating, 0) / product.reviews.length))}
                        ${'â˜†'.repeat(5 - Math.floor(product.reviews.reduce((acc, rev) => acc + rev.rating, 0) / product.reviews.length))}
                      </div>
                      <span class="text-xs">(${product.reviews.length} reviews)</span>
                    </td>
                  `).join('')}
                </tr>
                <tr>
                  <td class="p-3 text-white font-semibold">Actions</td>
                  ${productsToCompare.map(product => `
                    <td class="p-3 text-center">
                      <button onclick="addToCart({id: '${product.id}', name: '${product.name}', price: ${product.price}, imageUrl: '${product.imageUrl}', size: 'M'})" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors">
                        Add to Cart
                      </button>
                    </td>
                  `).join('')}
                </tr>
              </tbody>
            </table>
          </div>
        `;
        
        comparisonContent.innerHTML = comparisonHTML;
        document.getElementById('product-comparison-modal').classList.add('show');
      }

      // Size recommendation tool
      function getSizeRecommendation() {
        const heightFeet = parseInt(document.getElementById('height-feet').value) || 5;
        const heightInches = parseInt(document.getElementById('height-inches').value) || 10;
        const weight = parseInt(document.getElementById('weight').value) || 150;
        const bodyType = document.getElementById('body-type').value;
        const preferredFit = document.querySelector('input[name="preferred-fit"]:checked').value;
        
        if (!bodyType) {
          showMessageBox('Please select your body type', 3000, true);
          return;
        }
        
        // Simple size recommendation algorithm
        const totalHeight = heightFeet * 12 + heightInches;
        let recommendedSize = 'M';
        
        if (totalHeight < 66) { // Under 5'6"
          if (weight < 140) recommendedSize = 'XS';
          else if (weight < 160) recommendedSize = 'S';
          else recommendedSize = 'M';
        } else if (totalHeight < 70) { // 5'6" to 5'10"
          if (weight < 150) recommendedSize = 'S';
          else if (weight < 180) recommendedSize = 'M';
          else recommendedSize = 'L';
        } else if (totalHeight < 74) { // 5'10" to 6'2"
          if (weight < 160) recommendedSize = 'M';
          else if (weight < 190) recommendedSize = 'L';
          else recommendedSize = 'XL';
        } else { // Over 6'2"
          if (weight < 170) recommendedSize = 'L';
          else if (weight < 200) recommendedSize = 'XL';
          else recommendedSize = 'XXL';
        }
        
        // Adjust based on body type and preferred fit
        if (bodyType === 'slim' && preferredFit === 'slim') {
          if (recommendedSize === 'M') recommendedSize = 'S';
          else if (recommendedSize === 'L') recommendedSize = 'M';
        } else if (bodyType === 'plus' || preferredFit === 'loose') {
          if (recommendedSize === 'M') recommendedSize = 'L';
          else if (recommendedSize === 'L') recommendedSize = 'XL';
        }
        
        const resultDiv = document.getElementById('size-recommendation-result');
        resultDiv.innerHTML = `
          <h4 class="text-lg font-semibold text-white mb-4">Size Recommendation</h4>
          <div class="recommendation-details space-y-3">
            <div class="flex justify-between">
              <span class="text-gray-300">Your Height:</span>
              <span class="text-white">${heightFeet}'${heightInches}"</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-300">Your Weight:</span>
              <span class="text-white">${weight} lbs</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-300">Body Type:</span>
              <span class="text-white">${bodyType.charAt(0).toUpperCase() + bodyType.slice(1)}</span>
            </div>
            <div class="flex justify-between">
              <span class="text-gray-300">Preferred Fit:</span>
              <span class="text-white">${preferredFit.charAt(0).toUpperCase() + preferredFit.slice(1)}</span>
            </div>
            <div class="border-t border-gray-600 pt-3 mt-3">
              <div class="flex justify-between">
                <span class="text-gray-300 font-semibold">Recommended Size:</span>
                <span class="text-2xl font-bold text-blue-400">${recommendedSize}</span>
              </div>
            </div>
          </div>
          <div class="mt-4 p-3 bg-blue-900 bg-opacity-20 border border-blue-500 rounded-lg">
            <p class="text-blue-300 text-sm">
              ðŸ’¡ <strong>Tip:</strong> This is a general recommendation. For the best fit, 
              consider trying on different sizes or checking our detailed size chart.
            </p>
          </div>
        `;
        
        resultDiv.classList.remove('hidden');
      }

      // Enhanced filtering system
      function applyAdvancedFilters() {
        const minPrice = parseInt(document.getElementById('min-price').value);
        const maxPrice = parseInt(document.getElementById('max-price').value);
        const brandFilter = document.getElementById('brand-filter').value;
        const materialCheckboxes = document.querySelectorAll('.material-checkbox:checked');
        const styleCheckboxes = document.querySelectorAll('.style-checkbox:checked');
        
        const selectedMaterials = Array.from(materialCheckboxes).map(cb => cb.value);
        const selectedStyles = Array.from(styleCheckboxes).map(cb => cb.value);
        
        let filteredProducts = localClothingItems.filter(item => {
          const matchesPrice = item.price >= minPrice && item.price <= maxPrice;
          const matchesBrand = !brandFilter || item.brand === brandFilter;
          const matchesMaterial = selectedMaterials.length === 0 || selectedMaterials.includes(item.material);
          const matchesStyle = selectedStyles.length === 0 || selectedStyles.includes(item.style);
          
          return matchesPrice && matchesBrand && matchesMaterial && matchesStyle;
        });
        
        renderFilteredProducts(filteredProducts);
        document.getElementById('advanced-search-modal').classList.remove('show');
        showMessageBox(`Found ${filteredProducts.length} products matching your criteria`);
      }

      function clearAdvancedFilters() {
        document.getElementById('min-price').value = 0;
        document.getElementById('max-price').value = 200;
        document.getElementById('brand-filter').value = '';
        document.querySelectorAll('.material-checkbox').forEach(cb => cb.checked = false);
        document.querySelectorAll('.style-checkbox').forEach(cb => cb.checked = false);
        
        renderFilteredProducts(localClothingItems);
        showMessageBox('All filters cleared');
      }

      // Dashboard functionality
      function showDashboard() {
        updateDashboardStats();
        updateDashboardWishlist();
        document.getElementById('user-dashboard-modal').classList.add('show');
      }

      function updateDashboardStats() {
        const orderCount = Object.keys(cart).length > 0 ? 1 : 0; // Simplified for demo
        const wishlistCount = wishlist.length;
        const reviewCount = localClothingItems.reduce((acc, item) => acc + item.reviews.length, 0);
        
        document.querySelector('#dashboard-overview .stat-card:nth-child(1) .stat-number').textContent = orderCount;
        document.querySelector('#dashboard-overview .stat-card:nth-child(2) .stat-number').textContent = wishlistCount;
        document.querySelector('#dashboard-overview .stat-card:nth-child(3) .stat-number').textContent = reviewCount;
      }

      function updateDashboardWishlist() {
        const wishlistContainer = document.getElementById('dashboard-wishlist-items');
        if (wishlist.length === 0) {
          wishlistContainer.innerHTML = `
            <div class="col-span-full text-center py-8">
              <div class="text-6xl mb-4">ðŸ’”</div>
              <p class="text-gray-400">Your wishlist is empty</p>
              <p class="text-sm text-gray-500">Start adding items you love!</p>
            </div>
          `;
        } else {
          wishlistContainer.innerHTML = wishlist.map(item => `
            <div class="wishlist-item bg-gray-700 rounded-lg p-4">
              <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-32 object-cover rounded mb-3">
              <h4 class="text-white font-semibold mb-2">${item.name}</h4>
              <p class="text-blue-400 font-bold mb-3">$${item.price.toFixed(2)}</p>
              <div class="flex gap-2">
                <button onclick="addToCart({id: '${item.id}', name: '${item.name}', price: ${item.price}, imageUrl: '${item.imageUrl}', size: 'M'})" class="bg-blue-600 text-white px-3 py-1 rounded text-xs hover:bg-blue-700 transition-colors">
                  Add to Cart
                </button>
                <button onclick="removeFromWishlist('${item.id}')" class="bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors">
                  Remove
                </button>
              </div>
            </div>
          `).join('');
        }
      }

      // Dashboard tab switching
      function switchDashboardTab(tabName) {
        // Hide all tab contents
        document.querySelectorAll('.dashboard-tab-content').forEach(content => {
          content.classList.add('hidden');
        });
        
        // Remove active class from all tabs
        document.querySelectorAll('.dashboard-tab').forEach(tab => {
          tab.classList.remove('active');
        });
        
        // Show selected tab content
        document.getElementById(`dashboard-${tabName}`).classList.remove('hidden');
        
        // Add active class to selected tab
        event.target.classList.add('active');
        
        // Update content if needed
        if (tabName === 'wishlist') {
          updateDashboardWishlist();
        }
      }

      // Save user preferences
      function saveUserPreferences() {
        const preferences = {
          emailOrders: document.getElementById('email-orders').checked,
          emailPromotions: document.getElementById('email-promotions').checked,
          emailNewsletter: document.getElementById('email-newsletter').checked,
          savePayment: document.getElementById('save-payment').checked,
          quickCheckout: document.getElementById('quick-checkout').checked
        };
        
        localStorage.setItem('userPreferences', JSON.stringify(preferences));
        showMessageBox('Preferences saved successfully!');
      }

      // Load user preferences
      function loadUserPreferences() {
        const savedPreferences = localStorage.getItem('userPreferences');
        if (savedPreferences) {
          const preferences = JSON.parse(savedPreferences);
          document.getElementById('email-orders').checked = preferences.emailOrders;
          document.getElementById('email-promotions').checked = preferences.emailPromotions;
          document.getElementById('email-newsletter').checked = preferences.emailNewsletter;
          document.getElementById('save-payment').checked = preferences.savePayment;
          document.getElementById('quick-checkout').checked = preferences.quickCheckout;
        }
      }

      // Enhanced product rendering with comparison buttons
      function renderFilteredProducts(products) {
        itemsGrid.innerHTML = '';
        
        if (products.length === 0) {
          itemsGrid.innerHTML = `
            <div class="col-span-full text-center py-12">
              <span class="text-6xl mb-4 block">ðŸ”</span>
              <p class="text-xl text-gray-300 mb-2">No products found</p>
              <p class="text-gray-500">Try adjusting your search or filters</p>
            </div>
          `;
          return;
        }

        products.forEach((item, index) => {
          const isInWishlist = wishlist.some(w => w.id === item.id);
          const isInComparison = comparisonList.includes(item.id);
          const itemCard = document.createElement('div');
          itemCard.className = 'bg-gray-800 rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 flex flex-col cursor-pointer product-card';
          itemCard.style.animationDelay = `${0.1 * index}s`;
          itemCard.dataset.itemId = item.id;
          itemCard.dataset.itemName = item.name;
          itemCard.dataset.itemPrice = item.price;
          itemCard.dataset.itemImage = item.imageUrl;
          itemCard.dataset.itemDescription = item.description;

          itemCard.innerHTML = `
            <div class="relative">
              <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-48 object-cover">
              <button class="wishlist-btn ${isInWishlist ? 'active' : ''}" data-item-id="${item.id}">
                <i class="fas fa-heart"></i>
              </button>
              <button class="comparison-btn ${isInComparison ? 'active' : ''}" data-item-id="${item.id}">
                <i class="fas fa-balance-scale"></i>
              </button>
              <div class="product-badges absolute top-2 left-2 flex gap-2">
                ${item.brand === 'premium' ? '<span class="bg-yellow-600 text-white text-xs px-2 py-1 rounded">Premium</span>' : ''}
                ${item.inStock ? '<span class="bg-green-600 text-white text-xs px-2 py-1 rounded">In Stock</span>' : '<span class="bg-red-600 text-white text-xs px-2 py-1 rounded">Out of Stock</span>'}
              </div>
            </div>
            <div class="p-4 flex flex-col justify-between flex-grow">
              <div>
                <h3 class="text-xl font-semibold text-white mb-2">${item.name}</h3>
                <p class="text-gray-300 text-sm mb-2">${item.category} â€¢ ${item.material} â€¢ ${item.style}</p>
                <p class="text-gray-300 text-lg mb-4">$${item.price.toFixed(2)}</p>
                <div class="product-tags flex flex-wrap gap-1 mb-3">
                  ${item.tags.slice(0, 3).map(tag => `<span class="bg-gray-700 text-gray-300 text-xs px-2 py-1 rounded">${tag}</span>`).join('')}
                </div>
              </div>
              <div class="flex gap-2">
                <button class="add-to-cart-btn flex-1 bg-white text-gray-900 font-bold py-2 px-4 rounded-md hover:bg-gray-200 transition-colors" data-item-id="${item.id}" data-item-name="${item.name}" data-item-price="${item.price}" data-item-image="${item.imageUrl}">Add to Cart</button>
                <button class="compare-btn bg-gray-600 text-white px-3 py-2 rounded-md hover:bg-gray-500 transition-colors ${isInComparison ? 'bg-blue-600' : ''}" onclick="toggleComparison('${item.id}')">
                  <i class="fas fa-balance-scale"></i>
                </button>
              </div>
            </div>
          `;
          itemsGrid.appendChild(itemCard);
        });

        addProductEventListeners();
      }

      function toggleComparison(productId) {
        if (comparisonList.includes(productId)) {
          removeFromComparison(productId);
        } else {
          addToComparison(productId);
        }
        renderFilteredProducts(localClothingItems); // Refresh to update UI
      }

      // Initialize all enhanced features
      function initializeAllFeatures() {
        // Initialize existing features
        initializeEnhancedFeatures();
        initializeEnhancedAuth();
        
        // Initialize new features
        initializeComparisonFeatures();
        initializeDashboardFeatures();
        initializeAdvancedSearch();
        initializeSizeRecommendation();
        
        // Load saved preferences
        loadUserPreferences();
        
        // Update comparison UI
        updateComparisonUI();
      }

      function initializeComparisonFeatures() {
        // Add comparison button to shop page
        const shopContent = document.getElementById('shop-content');
        if (shopContent) {
          const comparisonSection = document.createElement('div');
          comparisonSection.className = 'comparison-section mb-6 flex justify-between items-center';
          comparisonSection.innerHTML = `
            <div class="comparison-info text-gray-400">
              <i class="fas fa-info-circle mr-2"></i>
              Select products to compare features and make informed decisions
            </div>
            <button id="comparison-btn" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" onclick="showComparisonModal()" disabled>
              Compare (0)
            </button>
          `;
          shopContent.insertBefore(comparisonSection, shopContent.firstChild);
        }
      }

      function initializeDashboardFeatures() {
        // Add dashboard button to profile dropdown
        const profileDropdown = document.querySelector('.profile-dropdown');
        if (profileDropdown) {
          const dashboardItem = document.createElement('a');
          dashboardItem.href = '#';
          dashboardItem.className = 'dropdown-item';
          dashboardItem.innerHTML = '<i class="fas fa-tachometer-alt mr-2"></i>Dashboard';
          dashboardItem.addEventListener('click', (e) => {
            e.preventDefault();
            showDashboard();
          });
          profileDropdown.appendChild(dashboardItem);
        }
      }

      function initializeAdvancedSearch() {
        // Add advanced search button to shop page
        const searchBar = document.querySelector('.search-bar');
        if (searchBar) {
          const advancedSearchBtn = document.createElement('button');
          advancedSearchBtn.className = 'absolute right-4 top-1/2 transform -translate-y-1/2 text-blue-400 hover:text-blue-300 transition-colors';
          advancedSearchBtn.innerHTML = '<i class="fas fa-sliders-h"></i>';
          advancedSearchBtn.title = 'Advanced Search';
          advancedSearchBtn.addEventListener('click', () => {
            document.getElementById('advanced-search-modal').classList.add('show');
          });
          searchBar.appendChild(advancedSearchBtn);
        }
      }

      function initializeSizeRecommendation() {
        // Add size recommendation button to product detail page
        const sizeSelector = document.querySelector('.size-selector');
        if (sizeSelector) {
          const sizeRecommendationBtn = document.createElement('button');
          sizeRecommendationBtn.className = 'text-blue-400 text-sm hover:text-blue-300 mt-1 block';
          sizeRecommendationBtn.innerHTML = '<i class="fas fa-magic"></i> Size Recommendation Tool';
          sizeRecommendationBtn.addEventListener('click', () => {
            document.getElementById('size-recommendation-modal').classList.add('show');
          });
          sizeSelector.appendChild(sizeRecommendationBtn);
        }
      }

      // Event listeners for new features
      document.addEventListener('DOMContentLoaded', function() {
        // Dashboard tab switching
        document.querySelectorAll('.dashboard-tab').forEach(tab => {
          tab.addEventListener('click', function() {
            const tabName = this.dataset.tab;
            switchDashboardTab(tabName);
          });
        });

        // Save preferences button
        const savePreferencesBtn = document.getElementById('save-preferences');
        if (savePreferencesBtn) {
          savePreferencesBtn.addEventListener('click', saveUserPreferences);
        }

        // Advanced search filters
        const applyFiltersBtn = document.getElementById('apply-advanced-filters');
        if (applyFiltersBtn) {
          applyFiltersBtn.addEventListener('click', applyAdvancedFilters);
        }

        const clearAdvancedFiltersBtn = document.getElementById('clear-advanced-filters');
        if (clearAdvancedFiltersBtn) {
          clearAdvancedFiltersBtn.addEventListener('click', clearAdvancedFilters);
        }

        // Size recommendation
        const getSizeRecommendationBtn = document.getElementById('get-size-recommendation');
        if (getSizeRecommendationBtn) {
          getSizeRecommendationBtn.addEventListener('click', getSizeRecommendation);
        }

        // Price range sliders
        const minPriceSlider = document.getElementById('min-price');
        const maxPriceSlider = document.getElementById('max-price');
        const minPriceDisplay = document.getElementById('min-price-display');
        const maxPriceDisplay = document.getElementById('max-price-display');

        if (minPriceSlider && maxPriceSlider) {
          minPriceSlider.addEventListener('input', function() {
            minPriceDisplay.textContent = this.value;
            if (parseInt(this.value) > parseInt(maxPriceSlider.value)) {
              maxPriceSlider.value = this.value;
              maxPriceDisplay.textContent = this.value;
            }
          });

          maxPriceSlider.addEventListener('input', function() {
            maxPriceDisplay.textContent = this.value;
            if (parseInt(this.value) < parseInt(minPriceSlider.value)) {
              minPriceSlider.value = this.value;
              minPriceDisplay.textContent = this.value;
            }
          });
        }

        // Modal close buttons
        const comparisonCloseBtn = document.getElementById('comparison-close-btn');
        if (comparisonCloseBtn) {
          comparisonCloseBtn.addEventListener('click', () => {
            document.getElementById('product-comparison-modal').classList.remove('show');
          });
        }

        const advancedSearchCloseBtn = document.getElementById('advanced-search-close-btn');
        if (advancedSearchCloseBtn) {
          advancedSearchCloseBtn.addEventListener('click', () => {
            document.getElementById('advanced-search-modal').classList.remove('show');
          });
        }

        const dashboardCloseBtn = document.getElementById('dashboard-close-btn');
        if (dashboardCloseBtn) {
          dashboardCloseBtn.addEventListener('click', () => {
            document.getElementById('user-dashboard-modal').classList.remove('show');
          });
        }

        const sizeRecommendationCloseBtn = document.getElementById('size-recommendation-close-btn');
        if (sizeRecommendationCloseBtn) {
          sizeRecommendationCloseBtn.addEventListener('click', () => {
            document.getElementById('size-recommendation-modal').classList.remove('show');
          });
        }

        // Close modals when clicking outside
        document.querySelectorAll('.modal-overlay').forEach(modal => {
          modal.addEventListener('click', function(e) {
            if (e.target === this) {
              this.classList.remove('show');
            }
          });
        });

        // Enhanced product search with real-time filtering
        const productSearch = document.getElementById('product-search');
        if (productSearch) {
          productSearch.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const filteredProducts = localClothingItems.filter(item => 
              item.name.toLowerCase().includes(searchTerm) ||
              item.description.toLowerCase().includes(searchTerm) ||
              item.category.toLowerCase().includes(searchTerm) ||
              item.material.toLowerCase().includes(searchTerm) ||
              item.style.toLowerCase().includes(searchTerm) ||
              item.tags.some(tag => tag.toLowerCase().includes(searchTerm))
            );
            renderFilteredProducts(filteredProducts);
          });
        }

        // Enhanced category filtering
        const categoryFilter = document.getElementById('category-filter');
        if (categoryFilter) {
          categoryFilter.addEventListener('change', function() {
            const selectedCategory = this.value;
            let filteredProducts = localClothingItems;
            
            if (selectedCategory) {
              filteredProducts = localClothingItems.filter(item => item.category === selectedCategory);
            }
            
            renderFilteredProducts(filteredProducts);
          });
        }

        // Enhanced price filtering
        const priceFilter = document.getElementById('price-filter');
        if (priceFilter) {
          priceFilter.addEventListener('change', function() {
            const selectedPrice = this.value;
            let filteredProducts = localClothingItems;
            
            if (selectedPrice) {
              const [min, max] = selectedPrice.split('-').map(Number);
              filteredProducts = localClothingItems.filter(item => {
                if (max) {
                  return item.price >= min && item.price <= max;
                } else {
                  return item.price >= min;
                }
              });
            }
            
            renderFilteredProducts(filteredProducts);
          });
        }

        // Enhanced size filtering
        const sizeFilter = document.getElementById('size-filter');
        if (sizeFilter) {
          sizeFilter.addEventListener('change', function() {
            const selectedSize = this.value;
            let filteredProducts = localClothingItems;
            
            if (selectedSize) {
              filteredProducts = localClothingItems.filter(item => 
                item.sizes.includes(selectedSize)
              );
            }
            
            renderFilteredProducts(filteredProducts);
          });
        }

        // Clear filters button
        const clearFiltersBtn = document.getElementById('clear-filters');
        if (clearFiltersBtn) {
          clearFiltersBtn.addEventListener('click', function() {
            // Reset all filters
            if (productSearch) productSearch.value = '';
            if (categoryFilter) categoryFilter.value = '';
            if (priceFilter) priceFilter.value = '';
            if (sizeFilter) sizeFilter.value = '';
            
            // Clear advanced filters
            if (minPriceSlider) minPriceSlider.value = 0;
            if (maxPriceSlider) maxPriceSlider.value = 200;
            if (minPriceDisplay) minPriceDisplay.textContent = '0';
            if (maxPriceDisplay) maxPriceDisplay.textContent = '200';
            
            if (document.getElementById('brand-filter')) {
              document.getElementById('brand-filter').value = '';
            }
            
            document.querySelectorAll('.material-checkbox').forEach(cb => cb.checked = false);
            document.querySelectorAll('.style-checkbox').forEach(cb => cb.checked = false);
            
            // Show all products
            renderFilteredProducts(localClothingItems);
            showMessageBox('All filters cleared');
          });
        }

        // Initialize comparison features
        initializeComparisonFeatures();
        
        // Initialize dashboard features
        initializeDashboardFeatures();
        
        // Initialize advanced search
        initializeAdvancedSearch();
        
        // Initialize size recommendation
        initializeSizeRecommendation();
        
        // Load user preferences
        loadUserPreferences();
        
        // Update comparison UI
        updateComparisonUI();
        
        // Blog system event listeners
        document.querySelectorAll('.blog-category-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            // Remove active class from all buttons
            document.querySelectorAll('.blog-category-btn').forEach(b => b.classList.remove('active'));
            // Add active class to clicked button
            this.classList.add('active');
            // Render posts for selected category
            const category = this.dataset.category;
            renderBlogPosts(category);
          });
        });
        
        // Newsletter submit button
        const newsletterSubmitBtn = document.getElementById('newsletter-submit');
        if (newsletterSubmitBtn) {
          newsletterSubmitBtn.addEventListener('click', subscribeToNewsletter);
        }
        
        // Modal close buttons for new modals
        const blogCloseBtn = document.getElementById('blog-close-btn');
        if (blogCloseBtn) {
          blogCloseBtn.addEventListener('click', () => {
            document.getElementById('blog-modal').classList.remove('show');
          });
        }
        
        const blogPostCloseBtn = document.getElementById('blog-post-close-btn');
        if (blogPostCloseBtn) {
          blogPostCloseBtn.addEventListener('click', () => {
            document.getElementById('blog-post-modal').classList.remove('show');
          });
        }
        
        const newsletterCloseBtn = document.getElementById('newsletter-close-btn');
        if (newsletterCloseBtn) {
          newsletterCloseBtn.addEventListener('click', () => {
            document.getElementById('newsletter-modal').classList.remove('show');
          });
        }
        
        const socialCloseBtn = document.getElementById('social-close-btn');
        if (socialCloseBtn) {
          socialCloseBtn.addEventListener('click', () => {
            document.getElementById('social-modal').classList.remove('show');
          });
        }
        
        // Social media follow buttons
        document.querySelectorAll('.social-follow-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            const platform = this.closest('.social-platform').querySelector('h4').textContent;
            showMessageBox(`Thanks for following us on ${platform}! ðŸŽ‰`, 3000);
          });
        });
      });





      // Blog system and enhanced features
      const blogPosts = [
        {
          id: 'style-tips-1',
          title: '5 Essential Style Tips for Every Wardrobe',
          excerpt: 'Discover the fundamental style principles that will transform your everyday look...',
          content: `
            <div class="blog-post-content">
              <img src="https://placehold.co/600x300/4a5568/FFFFFF?text=Style+Tips" alt="Style Tips" class="w-full h-64 object-cover rounded-lg mb-6">
              <h2 class="text-3xl font-bold text-white mb-4">5 Essential Style Tips for Every Wardrobe</h2>
              <p class="text-gray-300 mb-4">Building a timeless wardrobe starts with understanding the basics. Here are five essential style tips that will elevate your fashion game.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">1. Invest in Quality Basics</h3>
              <p class="text-gray-300 mb-4">Start with high-quality essentials like a well-fitted white tee, classic jeans, and versatile blazers. These pieces form the foundation of your wardrobe.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">2. Understand Your Body Type</h3>
              <p class="text-gray-300 mb-4">Knowing your body shape helps you choose flattering silhouettes. Experiment with different cuts to find what works best for you.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">3. Master the Art of Layering</h3>
              <p class="text-gray-300 mb-4">Layering adds depth and interest to your outfits. Start with thin layers and build up for a sophisticated look.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">4. Pay Attention to Fit</h3>
              <p class="text-gray-300 mb-4">The right fit can make or break an outfit. Don't be afraid to get items tailored for the perfect fit.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">5. Develop Your Personal Style</h3>
              <p class="text-gray-300 mb-4">Fashion is about self-expression. Take inspiration from others but always stay true to your unique style.</p>
              
              <div class="blog-tags mt-6">
                <span class="bg-blue-600 text-white px-3 py-1 rounded-full text-sm mr-2">Style Tips</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm mr-2">Fashion</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm">Wardrobe</span>
              </div>
            </div>
          `,
          category: 'style',
          author: 'Ultre Team',
          date: '2025-01-15',
          readTime: '5 min read',
          image: 'https://placehold.co/400x250/4a5568/FFFFFF?text=Style+Tips'
        },
        {
          id: 'sustainability-1',
          title: 'Our Commitment to Sustainable Fashion',
          excerpt: 'Learn about Ultre\'s dedication to eco-friendly practices and sustainable materials...',
          content: `
            <div class="blog-post-content">
              <img src="https://placehold.co/600x300/38a169/FFFFFF?text=Sustainability" alt="Sustainability" class="w-full h-64 object-cover rounded-lg mb-6">
              <h2 class="text-3xl font-bold text-white mb-4">Our Commitment to Sustainable Fashion</h2>
              <p class="text-gray-300 mb-4">At Ultre, we believe fashion should be both beautiful and responsible. Here's how we're making a difference.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Eco-Friendly Materials</h3>
              <p class="text-gray-300 mb-4">We source organic cotton, recycled polyester, and other sustainable materials to reduce our environmental impact.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Ethical Manufacturing</h3>
              <p class="text-gray-300 mb-4">Our production partners follow fair labor practices and maintain safe working conditions for all workers.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Reduced Waste</h3>
              <p class="text-gray-300 mb-4">We implement zero-waste patterns and recycle fabric scraps to minimize textile waste.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Carbon Footprint</h3>
              <p class="text-gray-300 mb-4">We're working towards carbon-neutral operations through renewable energy and efficient logistics.</p>
              
              <div class="blog-tags mt-6">
                <span class="bg-green-600 text-white px-3 py-1 rounded-full text-sm mr-2">Sustainability</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm mr-2">Eco-Friendly</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm">Fashion</span>
              </div>
            </div>
          `,
          category: 'sustainability',
          author: 'Ultre Team',
          date: '2025-01-12',
          readTime: '4 min read',
          image: 'https://placehold.co/400x250/38a169/FFFFFF?text=Sustainability'
        },
        {
          id: 'behind-scenes-1',
          title: 'A Day in the Life: Behind the Scenes at Ultre',
          excerpt: 'Take a peek into our creative process and see how we bring your favorite pieces to life...',
          content: `
            <div class="blog-post-content">
              <img src="https://placehold.co/600x300/805ad5/FFFFFF?text=Behind+Scenes" alt="Behind the Scenes" class="w-full h-64 object-cover rounded-lg mb-6">
              <h2 class="text-3xl font-bold text-white mb-4">A Day in the Life: Behind the Scenes at Ultre</h2>
              <p class="text-gray-300 mb-4">Ever wondered what goes into creating your favorite Ultre pieces? Join us for a behind-the-scenes look at our creative process.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Morning Inspiration</h3>
              <p class="text-gray-300 mb-4">Our day starts with trend research, mood boards, and inspiration gathering from around the world.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Design Development</h3>
              <p class="text-gray-300 mb-4">Our designers sketch, prototype, and refine each piece until it meets our high standards.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Quality Control</h3>
              <p class="text-gray-300 mb-4">Every garment undergoes rigorous testing to ensure durability, comfort, and style.</p>
              
              <h3 class="text-xl font-semibold text-white mb-3">Photography & Marketing</h3>
              <p class="text-gray-300 mb-4">We capture each piece in its best light to showcase the quality and style you can expect.</p>
              
              <div class="blog-tags mt-6">
                <span class="bg-purple-600 text-white px-3 py-1 rounded-full text-sm mr-2">Behind the Scenes</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm mr-2">Creative Process</span>
                <span class="bg-gray-600 text-white px-3 py-1 rounded-full text-sm">Team</span>
              </div>
            </div>
          `,
          category: 'behind-scenes',
          author: 'Ultre Team',
          date: '2025-01-10',
          readTime: '6 min read',
          image: 'https://placehold.co/400x250/805ad5/FFFFFF?text=Behind+Scenes'
        }
      ];

      // Social media feed data
      const socialFeed = [
        {
          platform: 'Instagram',
          content: 'New collection dropping next week! ðŸ”¥ #UltreStyle #NewCollection',
          likes: 1247,
          comments: 89,
          image: 'https://placehold.co/300x300/e53e3e/FFFFFF?text=IG+Post',
          time: '2 hours ago'
        },
        {
          platform: 'Twitter',
          content: 'Sustainability isn\'t just a trendâ€”it\'s our future. ðŸŒ± #SustainableFashion #Ultre',
          likes: 567,
          comments: 23,
          image: 'https://placehold.co/300x300/3182ce/FFFFFF?text=Twitter+Post',
          time: '5 hours ago'
        },
        {
          platform: 'YouTube',
          content: 'New styling tutorial: How to layer like a pro! ðŸ‘” #StyleTips #UltreTutorial',
          likes: 892,
          comments: 156,
          image: 'https://placehold.co/300x300/d53f8c/FFFFFF?text=YT+Post',
          time: '1 day ago'
        }
      ];

      // Blog system functions
      function showBlogModal() {
        renderBlogPosts('all');
        document.getElementById('blog-modal').classList.add('show');
      }

      function renderBlogPosts(category) {
        const container = document.getElementById('blog-posts-container');
        const filteredPosts = category === 'all' ? blogPosts : blogPosts.filter(post => post.category === category);
        
        container.innerHTML = filteredPosts.map(post => `
          <div class="blog-post-card bg-gray-800 rounded-lg overflow-hidden cursor-pointer hover:transform hover:scale-105 transition-all duration-300" onclick="showBlogPost('${post.id}')">
            <img src="${post.image}" alt="${post.title}" class="w-full h-48 object-cover">
            <div class="p-6">
              <div class="blog-meta text-sm text-gray-400 mb-2">
                <span class="mr-3">${post.date}</span>
                <span>${post.readTime}</span>
              </div>
              <h3 class="text-xl font-bold text-white mb-3">${post.title}</h3>
              <p class="text-gray-300 mb-4">${post.excerpt}</p>
              <div class="blog-author text-sm text-gray-400">By ${post.author}</div>
            </div>
          </div>
        `).join('');
      }

      function showBlogPost(postId) {
        const post = blogPosts.find(p => p.id === postId);
        if (!post) return;
        
        const container = document.getElementById('blog-post-content');
        container.innerHTML = post.content;
        
        document.getElementById('blog-post-modal').classList.add('show');
        document.getElementById('blog-modal').classList.remove('show');
      }

      // Newsletter system
      function showNewsletterModal() {
        document.getElementById('newsletter-modal').classList.add('show');
      }

      function subscribeToNewsletter() {
        const firstName = document.getElementById('newsletter-first-name').value;
        const email = document.getElementById('newsletter-email').value;
        const styleTips = document.getElementById('newsletter-style-tips').checked;
        const newCollections = document.getElementById('newsletter-new-collections').checked;
        const exclusiveOffers = document.getElementById('newsletter-exclusive-offers').checked;
        
        if (!firstName || !email) {
          showMessageBox('Please fill in all required fields', 3000, true);
          return;
        }
        
        // Save newsletter preferences
        const newsletterData = {
          firstName,
          email,
          preferences: {
            styleTips,
            newCollections,
            exclusiveOffers
          },
          subscribedAt: new Date().toISOString()
        };
        
        localStorage.setItem('newsletterSubscription', JSON.stringify(newsletterData));
        
        document.getElementById('newsletter-modal').classList.remove('show');
        showMessageBox('Thank you for subscribing to our newsletter! ðŸŽ‰');
        
        // Clear form
        document.getElementById('newsletter-first-name').value = '';
        document.getElementById('newsletter-email').value = '';
      }

      // Social media integration
      function showSocialModal() {
        renderSocialFeed();
        document.getElementById('social-modal').classList.add('show');
      }

      function renderSocialFeed() {
        const container = document.getElementById('social-feed-container');
        container.innerHTML = socialFeed.map(post => `
          <div class="social-post bg-gray-800 rounded-lg p-4">
            <div class="social-post-header flex items-center justify-between mb-3">
              <span class="text-sm font-semibold text-white">${post.platform}</span>
              <span class="text-xs text-gray-400">${post.time}</span>
            </div>
            <img src="${post.image}" alt="Social post" class="w-full h-32 object-cover rounded mb-3">
            <p class="text-gray-300 text-sm mb-3">${post.content}</p>
            <div class="social-stats flex justify-between text-xs text-gray-400">
              <span>â¤ï¸ ${post.likes}</span>
              <span>ðŸ’¬ ${post.comments}</span>
            </div>
          </div>
        `).join('');
      }

      // Enhanced homepage features
      function enhanceHomepage() {
        // Add blog section button
        const featuredBlog = document.querySelector('#featured-blog');
        if (featuredBlog) {
          const viewAllBtn = document.createElement('button');
          viewAllBtn.className = 'shop-button mt-6';
          viewAllBtn.textContent = 'View All Blog Posts';
          viewAllBtn.onclick = showBlogModal;
          featuredBlog.appendChild(viewAllBtn);
        }
        
        // Add newsletter section button
        const newsletterSection = document.querySelector('#newsletter-signup');
        if (newsletterSection) {
          const newsletterBtn = document.querySelector('#newsletter-signup button');
          if (newsletterBtn) {
            newsletterBtn.onclick = showNewsletterModal;
          }
        }
        
        // Add social media section
        const socialProof = document.querySelector('#social-proof');
        if (socialProof) {
          const socialBtn = document.createElement('button');
          socialBtn.className = 'shop-button mt-6';
          socialBtn.textContent = 'Follow Us on Social Media';
          socialBtn.onclick = showSocialModal;
          socialProof.appendChild(socialBtn);
        }
      }

      // Enhanced product recommendations
      function getProductRecommendations(userId) {
        // Simple recommendation algorithm based on wishlist and cart
        const userWishlist = wishlist.map(item => item.id);
        const userCart = Object.keys(cart);
        
        let recommendations = localClothingItems.filter(item => 
          !userWishlist.includes(item.id) && !userCart.includes(item.id)
        );
        
        // Sort by rating and popularity
        recommendations.sort((a, b) => {
          const aRating = a.reviews.reduce((acc, rev) => acc + rev.rating, 0) / a.reviews.length;
          const bRating = b.reviews.reduce((acc, rev) => acc + rev.rating, 0) / b.reviews.length;
          return bRating - aRating;
        });
        
        return recommendations.slice(0, 4);
      }

      // Enhanced user experience features
      function showWelcomeTour() {
        const tourSteps = [
          {
            title: 'Welcome to Ultre! ðŸ‘‹',
            content: 'Let\'s take a quick tour of our amazing features.',
            target: '.logo'
          },
          {
            title: 'Shop Our Collection ðŸ›ï¸',
            content: 'Browse our curated selection of premium clothing.',
            target: '#shop-button'
          },
          {
            title: 'Compare Products âš–ï¸',
            content: 'Use our comparison tool to find the perfect items.',
            target: '.comparison-section'
          },
          {
            title: 'Track Your Orders ðŸ“¦',
            content: 'Keep track of your orders and delivery status.',
            target: '#cart-button'
          }
        ];
        
        let currentStep = 0;
        
        function showStep() {
          if (currentStep >= tourSteps.length) {
            hideTour();
            return;
          }
          
          const step = tourSteps[currentStep];
          const target = document.querySelector(step.target);
          
          if (target) {
            showMessageBox(`${step.title}\n\n${step.content}`, 4000);
            target.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          
          currentStep++;
          setTimeout(showStep, 4500);
        }
        
        showStep();
      }

      function hideTour() {
        // Tour completed
        localStorage.setItem('tourCompleted', 'true');
      }

      // Initialize enhanced homepage features
      function initializeEnhancedHomepage() {
        enhanceHomepage();
        
        // Show welcome tour for new users
        if (!localStorage.getItem('tourCompleted')) {
          setTimeout(showWelcomeTour, 2000);
        }
        
        // Add product recommendations to homepage
        const recommendations = getProductRecommendations();
        if (recommendations.length > 0) {
          const homeMain = document.getElementById('home-main');
          if (homeMain) {
            const recommendationsSection = document.createElement('section');
            recommendationsSection.className = 'recommendations-section py-16 bg-gray-900';
            recommendationsSection.innerHTML = `
              <div class="max-w-6xl mx-auto px-4">
                <h2 class="text-3xl font-bold text-white text-center mb-12">Recommended for You</h2>
                <div class="recommendations-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                  ${recommendations.map(item => `
                    <div class="recommendation-card bg-gray-800 rounded-lg overflow-hidden cursor-pointer hover:transform hover:scale-105 transition-all duration-300" onclick="showItemDetail('${item.id}')">
                      <img src="${item.imageUrl}" alt="${item.name}" class="w-full h-48 object-cover">
                      <div class="p-4">
                        <h3 class="text-lg font-semibold text-white mb-2">${item.name}</h3>
                        <p class="text-blue-400 font-bold">$${item.price.toFixed(2)}</p>
                      </div>
                    </div>
                  `).join('')}
                </div>
              </div>
            `;
            homeMain.appendChild(recommendationsSection);
          }
        }
      }

      // Initialize all features when window loads
      window.onload = function() {
        // Initialize existing features
        initializeEnhancedFeatures();
        initializeEnhancedAuth();
        
        // Initialize new features
        initializeAllFeatures();
        initializeEnhancedHomepage();
        
        // Show home page by default
        showPage('home');
        
        // Load saved data
        loadCartFromStorage();
        loadWishlistFromStorage();
        
        // Update UI
        updateCartCount();
        updateComparisonUI();
        
        // Show welcome message for first-time visitors
        if (!localStorage.getItem('hasVisited')) {
          setTimeout(() => {
            showMessageBox('Welcome to Ultre! ðŸŽ‰ Explore our collection and discover your perfect style.', 5000);
            localStorage.setItem('hasVisited', 'true');
          }, 1000);
        }
      };

    </script>
  </body>
</html>
